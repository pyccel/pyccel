

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyccel.codegen.printing.ccode &mdash; pyccel * documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/fonts.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> pyccel
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules.html">docBranck</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">pyccel</a>
        
      </nav>


      <div class="wy-nav-content">
<div class="git-ribbon">
  <a href="http://github.com/SwissDataScienceCenter" rel="me">Join us on GitHub</a>
</div>

        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyccel.codegen.printing.ccode</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyccel.codegen.printing.ccode</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding: utf-8</span>
<span class="c1">#------------------------------------------------------------------------------------------#</span>
<span class="c1"># This file is part of Pyccel which is released under MIT License. See the LICENSE file or #</span>
<span class="c1"># go to https://github.com/pyccel/pyccel/blob/master/LICENSE for full license details.     #</span>
<span class="c1">#------------------------------------------------------------------------------------------#</span>
<span class="c1"># pylint: disable=missing-function-docstring</span>
<span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.basic</span>     <span class="kn">import</span> <span class="n">ScopedNode</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.builtins</span>  <span class="kn">import</span> <span class="n">PythonRange</span><span class="p">,</span> <span class="n">PythonComplex</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.builtins</span>  <span class="kn">import</span> <span class="n">PythonPrint</span><span class="p">,</span> <span class="n">PythonType</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.builtins</span>  <span class="kn">import</span> <span class="n">PythonList</span><span class="p">,</span> <span class="n">PythonTuple</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.core</span>      <span class="kn">import</span> <span class="n">Declare</span><span class="p">,</span> <span class="n">For</span><span class="p">,</span> <span class="n">CodeBlock</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.core</span>      <span class="kn">import</span> <span class="n">FuncAddressDeclare</span><span class="p">,</span> <span class="n">FunctionCall</span><span class="p">,</span> <span class="n">FunctionCallArgument</span><span class="p">,</span> <span class="n">FunctionDef</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.core</span>      <span class="kn">import</span> <span class="n">Deallocate</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.core</span>      <span class="kn">import</span> <span class="n">FunctionAddress</span><span class="p">,</span> <span class="n">FunctionDefArgument</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.core</span>      <span class="kn">import</span> <span class="n">Assign</span><span class="p">,</span> <span class="n">Import</span><span class="p">,</span> <span class="n">AugAssign</span><span class="p">,</span> <span class="n">AliasAssign</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.core</span>      <span class="kn">import</span> <span class="n">SeparatorComment</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.core</span>      <span class="kn">import</span> <span class="n">Module</span><span class="p">,</span> <span class="n">AsName</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.operators</span> <span class="kn">import</span> <span class="n">PyccelAdd</span><span class="p">,</span> <span class="n">PyccelMul</span><span class="p">,</span> <span class="n">PyccelMinus</span><span class="p">,</span> <span class="n">PyccelLt</span><span class="p">,</span> <span class="n">PyccelGt</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.operators</span> <span class="kn">import</span> <span class="n">PyccelAssociativeParenthesis</span><span class="p">,</span> <span class="n">PyccelMod</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.operators</span> <span class="kn">import</span> <span class="n">PyccelUnarySub</span><span class="p">,</span> <span class="n">IfTernaryOperator</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.datatypes</span> <span class="kn">import</span> <span class="n">NativeInteger</span><span class="p">,</span> <span class="n">NativeBool</span><span class="p">,</span> <span class="n">NativeComplex</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.datatypes</span> <span class="kn">import</span> <span class="n">NativeFloat</span><span class="p">,</span> <span class="n">NativeTuple</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">default_precision</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.internals</span> <span class="kn">import</span> <span class="n">Slice</span><span class="p">,</span> <span class="n">PrecomputedCode</span><span class="p">,</span> <span class="n">get_final_precision</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.literals</span>  <span class="kn">import</span> <span class="n">LiteralTrue</span><span class="p">,</span> <span class="n">LiteralFalse</span><span class="p">,</span> <span class="n">LiteralImaginaryUnit</span><span class="p">,</span> <span class="n">LiteralFloat</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.literals</span>  <span class="kn">import</span> <span class="n">LiteralString</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">,</span> <span class="n">Literal</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.literals</span>  <span class="kn">import</span> <span class="n">Nil</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.mathext</span>  <span class="kn">import</span> <span class="n">math_constants</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.numpyext</span> <span class="kn">import</span> <span class="n">NumpyFull</span><span class="p">,</span> <span class="n">NumpyArray</span><span class="p">,</span> <span class="n">NumpyArange</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.numpyext</span> <span class="kn">import</span> <span class="n">NumpyReal</span><span class="p">,</span> <span class="n">NumpyImag</span><span class="p">,</span> <span class="n">NumpyFloat</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.utilities</span> <span class="kn">import</span> <span class="n">expand_to_loops</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.variable</span> <span class="kn">import</span> <span class="n">IndexedElement</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.variable</span> <span class="kn">import</span> <span class="n">PyccelArraySize</span><span class="p">,</span> <span class="n">Variable</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.variable</span> <span class="kn">import</span> <span class="n">DottedName</span>
<span class="kn">from</span> <span class="nn">pyccel.ast.variable</span> <span class="kn">import</span> <span class="n">InhomogeneousTupleVariable</span><span class="p">,</span> <span class="n">HomogeneousTupleVariable</span>

<span class="kn">from</span> <span class="nn">pyccel.ast.c_concepts</span> <span class="kn">import</span> <span class="n">ObjectAddress</span><span class="p">,</span> <span class="n">CMacro</span><span class="p">,</span> <span class="n">CStringExpression</span>

<span class="kn">from</span> <span class="nn">pyccel.codegen.printing.codeprinter</span> <span class="kn">import</span> <span class="n">CodePrinter</span>

<span class="kn">from</span> <span class="nn">pyccel.errors.errors</span>   <span class="kn">import</span> <span class="n">Errors</span>
<span class="kn">from</span> <span class="nn">pyccel.errors.messages</span> <span class="kn">import</span> <span class="p">(</span><span class="n">PYCCEL_RESTRICTION_TODO</span><span class="p">,</span> <span class="n">INCOMPATIBLE_TYPEVAR_TO_FUNC</span><span class="p">,</span>
                                    <span class="n">PYCCEL_RESTRICTION_IS_ISNOT</span><span class="p">,</span> <span class="n">UNSUPPORTED_ARRAY_RANK</span><span class="p">)</span>


<span class="n">errors</span> <span class="o">=</span> <span class="n">Errors</span><span class="p">()</span>

<span class="c1">#Â TODO: add examples</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;CCodePrinter&quot;</span><span class="p">,</span> <span class="s2">&quot;ccode&quot;</span><span class="p">]</span>

<span class="c1"># dictionary mapping numpy function to (argument_conditions, C_function).</span>
<span class="c1"># Used in CCodePrinter._print_NumpyUfuncBase(self, expr)</span>
<span class="n">numpy_ufunc_to_c_float</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;NumpyAbs&#39;</span>  <span class="p">:</span> <span class="s1">&#39;fabs&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyFabs&#39;</span> <span class="p">:</span> <span class="s1">&#39;fabs&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyMin&#39;</span>  <span class="p">:</span> <span class="s1">&#39;minval&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyMax&#39;</span>  <span class="p">:</span> <span class="s1">&#39;maxval&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyFloor&#39;</span><span class="p">:</span> <span class="s1">&#39;floor&#39;</span><span class="p">,</span>  <span class="c1"># TODO: might require special treatment with casting</span>
    <span class="c1"># ---</span>
    <span class="s1">&#39;NumpyExp&#39;</span> <span class="p">:</span> <span class="s1">&#39;exp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyLog&#39;</span> <span class="p">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpySqrt&#39;</span><span class="p">:</span> <span class="s1">&#39;sqrt&#39;</span><span class="p">,</span>
    <span class="c1"># ---</span>
    <span class="s1">&#39;NumpySin&#39;</span>    <span class="p">:</span> <span class="s1">&#39;sin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyCos&#39;</span>    <span class="p">:</span> <span class="s1">&#39;cos&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyTan&#39;</span>    <span class="p">:</span> <span class="s1">&#39;tan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArcsin&#39;</span> <span class="p">:</span> <span class="s1">&#39;asin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArccos&#39;</span> <span class="p">:</span> <span class="s1">&#39;acos&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArctan&#39;</span> <span class="p">:</span> <span class="s1">&#39;atan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArctan2&#39;</span><span class="p">:</span> <span class="s1">&#39;atan2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpySinh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;sinh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyCosh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;cosh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyTanh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;tanh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArcsinh&#39;</span><span class="p">:</span> <span class="s1">&#39;asinh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArccosh&#39;</span><span class="p">:</span> <span class="s1">&#39;acosh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArctanh&#39;</span><span class="p">:</span> <span class="s1">&#39;atanh&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">numpy_ufunc_to_c_complex</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;NumpyAbs&#39;</span>  <span class="p">:</span> <span class="s1">&#39;cabs&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyMin&#39;</span>  <span class="p">:</span> <span class="s1">&#39;minval&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyMax&#39;</span>  <span class="p">:</span> <span class="s1">&#39;maxval&#39;</span><span class="p">,</span>
    <span class="c1"># ---</span>
    <span class="s1">&#39;NumpyExp&#39;</span> <span class="p">:</span> <span class="s1">&#39;cexp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyLog&#39;</span> <span class="p">:</span> <span class="s1">&#39;clog&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpySqrt&#39;</span><span class="p">:</span> <span class="s1">&#39;csqrt&#39;</span><span class="p">,</span>
    <span class="c1"># ---</span>
    <span class="s1">&#39;NumpySin&#39;</span>    <span class="p">:</span> <span class="s1">&#39;csin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyCos&#39;</span>    <span class="p">:</span> <span class="s1">&#39;ccos&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyTan&#39;</span>    <span class="p">:</span> <span class="s1">&#39;ctan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArcsin&#39;</span> <span class="p">:</span> <span class="s1">&#39;casin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArccos&#39;</span> <span class="p">:</span> <span class="s1">&#39;cacos&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArctan&#39;</span> <span class="p">:</span> <span class="s1">&#39;catan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpySinh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;csinh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyCosh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;ccosh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyTanh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;ctanh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArcsinh&#39;</span><span class="p">:</span> <span class="s1">&#39;casinh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArccosh&#39;</span><span class="p">:</span> <span class="s1">&#39;cacosh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NumpyArctanh&#39;</span><span class="p">:</span> <span class="s1">&#39;catanh&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># dictionary mapping Math function to (argument_conditions, C_function).</span>
<span class="c1"># Used in CCodePrinter._print_MathFunctionBase(self, expr)</span>
<span class="c1"># Math function ref https://docs.python.org/3/library/math.html</span>
<span class="n">math_function_to_c</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># ---------- Number-theoretic and representation functions ------------</span>
    <span class="s1">&#39;MathCeil&#39;</span>     <span class="p">:</span> <span class="s1">&#39;ceil&#39;</span><span class="p">,</span>
    <span class="c1"># &#39;MathComb&#39;   : &#39;com&#39; # TODO</span>
    <span class="s1">&#39;MathCopysign&#39;</span><span class="p">:</span> <span class="s1">&#39;copysign&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathFabs&#39;</span>   <span class="p">:</span> <span class="s1">&#39;fabs&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathFloor&#39;</span>    <span class="p">:</span> <span class="s1">&#39;floor&#39;</span><span class="p">,</span>
    <span class="c1"># &#39;MathFmod&#39;   : &#39;???&#39;,  # TODO</span>
    <span class="c1"># &#39;MathRexp&#39;   : &#39;???&#39;   TODO requires two output</span>
    <span class="c1"># &#39;MathFsum&#39;   : &#39;???&#39;,  # TODO</span>
    <span class="c1"># &#39;MathIsclose&#39; : &#39;???&#39;,  # TODO</span>
    <span class="s1">&#39;MathIsfinite&#39;</span><span class="p">:</span> <span class="s1">&#39;isfinite&#39;</span><span class="p">,</span> <span class="c1"># int isfinite(real-floating x);</span>
    <span class="s1">&#39;MathIsinf&#39;</span>   <span class="p">:</span> <span class="s1">&#39;isinf&#39;</span><span class="p">,</span> <span class="c1"># int isinf(real-floating x);</span>
    <span class="s1">&#39;MathIsnan&#39;</span>   <span class="p">:</span> <span class="s1">&#39;isnan&#39;</span><span class="p">,</span> <span class="c1"># int isnan(real-floating x);</span>
    <span class="c1"># &#39;MathIsqrt&#39;  : &#39;???&#39; TODO</span>
    <span class="s1">&#39;MathLdexp&#39;</span>  <span class="p">:</span> <span class="s1">&#39;ldexp&#39;</span><span class="p">,</span>
    <span class="c1"># &#39;MathModf&#39;  : &#39;???&#39; TODO return two value</span>
    <span class="c1"># &#39;MathPerm&#39;  : &#39;???&#39; TODO</span>
    <span class="c1"># &#39;MathProd&#39;  : &#39;???&#39; TODO</span>
    <span class="s1">&#39;MathRemainder&#39;</span>  <span class="p">:</span> <span class="s1">&#39;remainder&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathTrunc&#39;</span>  <span class="p">:</span> <span class="s1">&#39;trunc&#39;</span><span class="p">,</span>

    <span class="c1"># ----------------- Power and logarithmic functions -----------------------</span>

    <span class="s1">&#39;MathExp&#39;</span>    <span class="p">:</span> <span class="s1">&#39;exp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathExpm1&#39;</span>  <span class="p">:</span> <span class="s1">&#39;expm1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathLog&#39;</span>    <span class="p">:</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span>      <span class="c1"># take also an option arg [base]</span>
    <span class="s1">&#39;MathLog1p&#39;</span>  <span class="p">:</span> <span class="s1">&#39;log1p&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathLog2&#39;</span>  <span class="p">:</span> <span class="s1">&#39;log2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathLog10&#39;</span>  <span class="p">:</span> <span class="s1">&#39;log10&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathPow&#39;</span>    <span class="p">:</span> <span class="s1">&#39;pow&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathSqrt&#39;</span>   <span class="p">:</span> <span class="s1">&#39;sqrt&#39;</span><span class="p">,</span>

    <span class="c1"># --------------------- Trigonometric functions ---------------------------</span>

    <span class="s1">&#39;MathAcos&#39;</span>   <span class="p">:</span> <span class="s1">&#39;acos&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathAsin&#39;</span>   <span class="p">:</span> <span class="s1">&#39;asin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathAtan&#39;</span>   <span class="p">:</span> <span class="s1">&#39;atan&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathAtan2&#39;</span>  <span class="p">:</span> <span class="s1">&#39;atan2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathCos&#39;</span>    <span class="p">:</span> <span class="s1">&#39;cos&#39;</span><span class="p">,</span>
    <span class="c1"># &#39;MathDist&#39;  : &#39;???&#39;, TODO</span>
    <span class="s1">&#39;MathHypot&#39;</span>  <span class="p">:</span> <span class="s1">&#39;hypot&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathSin&#39;</span>    <span class="p">:</span> <span class="s1">&#39;sin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathTan&#39;</span>    <span class="p">:</span> <span class="s1">&#39;tan&#39;</span><span class="p">,</span>


    <span class="c1"># -------------------------- Hyperbolic functions -------------------------</span>

    <span class="s1">&#39;MathAcosh&#39;</span>  <span class="p">:</span> <span class="s1">&#39;acosh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathAsinh&#39;</span>  <span class="p">:</span> <span class="s1">&#39;asinh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathAtanh&#39;</span>  <span class="p">:</span> <span class="s1">&#39;atanh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathCosh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;cosh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathSinh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;sinh&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathTanh&#39;</span>   <span class="p">:</span> <span class="s1">&#39;tanh&#39;</span><span class="p">,</span>

    <span class="c1"># --------------------------- Special functions ---------------------------</span>

    <span class="s1">&#39;MathErf&#39;</span>    <span class="p">:</span> <span class="s1">&#39;erf&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathErfc&#39;</span>   <span class="p">:</span> <span class="s1">&#39;erfc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathGamma&#39;</span>  <span class="p">:</span> <span class="s1">&#39;tgamma&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathLgamma&#39;</span> <span class="p">:</span> <span class="s1">&#39;lgamma&#39;</span><span class="p">,</span>

    <span class="c1"># --------------------------- internal functions --------------------------</span>
    <span class="s1">&#39;MathFactorial&#39;</span> <span class="p">:</span> <span class="s1">&#39;pyc_factorial&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathGcd&#39;</span>       <span class="p">:</span> <span class="s1">&#39;pyc_gcd&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathDegrees&#39;</span>   <span class="p">:</span> <span class="s1">&#39;pyc_degrees&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathRadians&#39;</span>   <span class="p">:</span> <span class="s1">&#39;pyc_radians&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MathLcm&#39;</span>       <span class="p">:</span> <span class="s1">&#39;pyc_lcm&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">c_library_headers</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;complex&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ctype&quot;</span><span class="p">,</span>
    <span class="s2">&quot;float&quot;</span><span class="p">,</span>
    <span class="s2">&quot;math&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stdarg&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stdbool&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stddef&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stdint&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stdio&quot;</span><span class="p">,</span>
    <span class="s2">&quot;stdlib&quot;</span><span class="p">,</span>
    <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tgmath&quot;</span><span class="p">,</span>
    <span class="s2">&quot;inttypes&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">dtype_registry</span> <span class="o">=</span> <span class="p">{(</span><span class="s1">&#39;float&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>   <span class="p">:</span> <span class="s1">&#39;double&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>   <span class="p">:</span> <span class="s1">&#39;float&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;double complex&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;float complex&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;int32_t&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;int64_t&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;int16_t&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;int8_t&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>    <span class="p">:</span> <span class="s1">&#39;bool&#39;</span><span class="p">}</span>

<span class="n">ndarray_type_registry</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>   <span class="p">:</span> <span class="s1">&#39;nd_double&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>   <span class="p">:</span> <span class="s1">&#39;nd_float&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;nd_cdouble&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;nd_cfloat&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;nd_int64&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;nd_int32&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;nd_int16&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;nd_int8&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>    <span class="p">:</span> <span class="s1">&#39;nd_bool&#39;</span><span class="p">}</span>

<span class="n">type_to_format</span> <span class="o">=</span> <span class="p">{(</span><span class="s1">&#39;float&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>   <span class="p">:</span> <span class="s1">&#39;</span><span class="si">%.12lf</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>   <span class="p">:</span> <span class="s1">&#39;</span><span class="si">%.12f</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;(</span><span class="si">%.12lf</span><span class="s1"> + </span><span class="si">%.12lf</span><span class="s1">j)&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;(</span><span class="si">%.12f</span><span class="s1"> + </span><span class="si">%.12f</span><span class="s1">j)&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>     <span class="p">:</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>     <span class="p">:</span> <span class="n">LiteralString</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">CMacro</span><span class="p">(</span><span class="s1">&#39;PRId64&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>     <span class="p">:</span> <span class="n">LiteralString</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">CMacro</span><span class="p">(</span><span class="s1">&#39;PRId16&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>     <span class="p">:</span> <span class="n">LiteralString</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">CMacro</span><span class="p">(</span><span class="s1">&#39;PRId8&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>    <span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="p">(</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">}</span>

<span class="n">import_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;omp_lib&#39;</span> <span class="p">:</span> <span class="s1">&#39;omp&#39;</span> <span class="p">}</span>

<span class="n">c_imports</span> <span class="o">=</span> <span class="p">{</span><span class="n">n</span> <span class="p">:</span> <span class="n">Import</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">Module</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(),</span> <span class="p">()))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span>
                <span class="p">[</span><span class="s1">&#39;stdlib&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;math&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;string&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;ndarrays&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;math&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;complex&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;stdint&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;pyc_math_c&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;stdio&#39;</span><span class="p">,</span>
                 <span class="s2">&quot;inttypes&quot;</span><span class="p">,</span>
                 <span class="s1">&#39;stdbool&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;assert&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;numpy_c&#39;</span><span class="p">]}</span>

<div class="viewcode-block" id="CCodePrinter"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter">[docs]</a><span class="k">class</span> <span class="nc">CCodePrinter</span><span class="p">(</span><span class="n">CodePrinter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A printer to convert python expressions to strings of c code&quot;&quot;&quot;</span>
    <span class="n">printmethod</span> <span class="o">=</span> <span class="s2">&quot;_ccode&quot;</span>
    <span class="n">language</span> <span class="o">=</span> <span class="s2">&quot;C&quot;</span>

    <span class="n">_default_settings</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;tabwidth&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">prefix_module</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="n">errors</span><span class="o">.</span><span class="n">set_target</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;file&#39;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix_module</span> <span class="o">=</span> <span class="n">prefix_module</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_additional_imports</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stdlib&#39;</span><span class="p">:</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;stdlib&#39;</span><span class="p">]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temporary_args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_module</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_in_header</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Dictionary linking optional variables to their</span>
        <span class="c1"># temporary counterparts which provide allocated</span>
        <span class="c1"># memory</span>
        <span class="c1"># Key is optional variable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_optional_partners</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="CCodePrinter.get_additional_imports"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.get_additional_imports">[docs]</a>    <span class="k">def</span> <span class="nf">get_additional_imports</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return the additional imports collected in printing stage&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_imports</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>

<div class="viewcode-block" id="CCodePrinter.add_import"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.add_import">[docs]</a>    <span class="k">def</span> <span class="nf">add_import</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">import_obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">import_obj</span><span class="o">.</span><span class="n">source</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_imports</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_imports</span><span class="p">[</span><span class="n">import_obj</span><span class="o">.</span><span class="n">source</span><span class="p">]</span> <span class="o">=</span> <span class="n">import_obj</span></div>

<div class="viewcode-block" id="CCodePrinter._get_statement"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._get_statement">[docs]</a>    <span class="k">def</span> <span class="nf">_get_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codestring</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">codestring</span></div>

<div class="viewcode-block" id="CCodePrinter._get_comment"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._get_comment">[docs]</a>    <span class="k">def</span> <span class="nf">_get_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;// </span><span class="si">{0}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._format_code"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._format_code">[docs]</a>    <span class="k">def</span> <span class="nf">_format_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent_code</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._flatten_list"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._flatten_list">[docs]</a>    <span class="k">def</span> <span class="nf">_flatten_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">irregular_list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">irregular_list</span><span class="p">,</span> <span class="p">(</span><span class="n">PythonList</span><span class="p">,</span> <span class="n">PythonTuple</span><span class="p">)):</span>
            <span class="n">f_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">element</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">irregular_list</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flatten_list</span><span class="p">(</span><span class="n">item</span><span class="p">)]</span>
            <span class="k">return</span> <span class="n">f_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">irregular_list</span><span class="p">]</span></div>

    <span class="c1">#========================== Numpy Elements ===============================#</span>
<div class="viewcode-block" id="CCodePrinter.copy_NumpyArray_Data"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.copy_NumpyArray_Data">[docs]</a>    <span class="k">def</span> <span class="nf">copy_NumpyArray_Data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; print the assignment of a NdArray or a homogeneous tuple</span>

<span class="sd">        parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr : PyccelAstNode</span>
<span class="sd">                The Assign Node used to get the lhs and rhs</span>
<span class="sd">        Return</span>
<span class="sd">        ------</span>
<span class="sd">            String</span>
<span class="sd">                Return a str that contains the declaration of a dummy data_buffer</span>
<span class="sd">                       and a call to an operator which copies it to an NdArray struct</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">rhs</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">lhs</span>
        <span class="k">if</span> <span class="n">rhs</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
        <span class="n">dummy_array_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_new_name</span><span class="p">(</span><span class="s1">&#39;array_dummy&#39;</span><span class="p">)</span>
        <span class="n">declare_dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="o">.</span><span class="n">dtype</span><span class="p">),</span> <span class="n">rhs</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_ndarray_type_registry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="o">.</span><span class="n">dtype</span><span class="p">),</span> <span class="n">rhs</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">rhs</span><span class="o">.</span><span class="n">arg</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">NumpyArray</span><span class="p">)</span> <span class="k">else</span> <span class="n">rhs</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="n">cpy_data</span> <span class="o">=</span> <span class="s2">&quot;memcpy(</span><span class="si">{0}</span><span class="s2">.</span><span class="si">{2}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">.</span><span class="si">{2}</span><span class="s2">, </span><span class="si">{0}</span><span class="s2">.buffer_size);</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cpy_data</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">:</span>
            <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># flattening the args to use them in C initialization.</span>
                <span class="n">arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flatten_list</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">arg</span><span class="p">)</span>
            <span class="n">dummy_array</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">[] = {</span><span class="si">%s</span><span class="s2">};</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">declare_dtype</span><span class="p">,</span> <span class="n">dummy_array_name</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
            <span class="n">cpy_data</span> <span class="o">=</span> <span class="s2">&quot;memcpy(</span><span class="si">{0}</span><span class="s2">.</span><span class="si">{2}</span><span class="s2">, </span><span class="si">{1}</span><span class="s2">, </span><span class="si">{0}</span><span class="s2">.buffer_size);</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs</span><span class="p">),</span> <span class="n">dummy_array_name</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
            <span class="k">return</span>  <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dummy_array</span><span class="p">,</span> <span class="n">cpy_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter.arrayFill"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.arrayFill">[docs]</a>    <span class="k">def</span> <span class="nf">arrayFill</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; print the assignment of a NdArray</span>

<span class="sd">        parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr : PyccelAstNode</span>
<span class="sd">                The Assign Node used to get the lhs and rhs</span>
<span class="sd">        Return</span>
<span class="sd">        ------</span>
<span class="sd">            String</span>
<span class="sd">                Return a str that contains a call to the C function array_fill,</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">rhs</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">lhs</span>
        <span class="n">code_init</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">declare_dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="o">.</span><span class="n">dtype</span><span class="p">),</span> <span class="n">rhs</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">rhs</span><span class="o">.</span><span class="n">fill_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="o">.</span><span class="n">fill_value</span><span class="p">,</span> <span class="n">Literal</span><span class="p">):</span>
                <span class="n">code_init</span> <span class="o">+=</span> <span class="s1">&#39;array_fill((</span><span class="si">{0}</span><span class="s1">)</span><span class="si">{1}</span><span class="s1">, </span><span class="si">{2}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">declare_dtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="o">.</span><span class="n">fill_value</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">code_init</span> <span class="o">+=</span> <span class="s1">&#39;array_fill(</span><span class="si">{0}</span><span class="s1">, </span><span class="si">{1}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="o">.</span><span class="n">fill_value</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">code_init</span></div>

<div class="viewcode-block" id="CCodePrinter._init_stack_array"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._init_stack_array">[docs]</a>    <span class="k">def</span> <span class="nf">_init_stack_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return a string which handles the assignment of a stack ndarray</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr : PyccelAstNode</span>
<span class="sd">                The Assign Node used to get the lhs and rhs</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            buffer_array : str</span>
<span class="sd">                String initialising the stack (C) array which stores the data</span>
<span class="sd">            array_init   : str</span>
<span class="sd">                String containing the rhs of the initialization of a stack array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">expr</span>
        <span class="n">dtype_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="n">dtype_str</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="n">np_dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_ndarray_type_registry</span><span class="p">(</span><span class="n">dtype_str</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">var</span><span class="o">.</span><span class="n">alloc_shape</span><span class="p">)</span>
        <span class="n">tot_shape</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">PyccelMul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">simplify</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">var</span><span class="o">.</span><span class="n">alloc_shape</span><span class="p">))</span>
        <span class="n">declare_dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

        <span class="n">dummy_array_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_new_name</span><span class="p">(</span><span class="s1">&#39;array_dummy&#39;</span><span class="p">)</span>
        <span class="n">buffer_array</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{dtype}</span><span class="s2"> </span><span class="si">{name}</span><span class="s2">[</span><span class="si">{size}</span><span class="s2">];</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">dtype</span> <span class="o">=</span> <span class="n">dtype</span><span class="p">,</span>
                <span class="n">name</span>  <span class="o">=</span> <span class="n">dummy_array_name</span><span class="p">,</span>
                <span class="n">size</span>  <span class="o">=</span> <span class="n">tot_shape</span><span class="p">)</span>
        <span class="n">shape_init</span> <span class="o">=</span> <span class="s2">&quot;(</span><span class="si">{declare_dtype}</span><span class="s2">[]){{</span><span class="si">{shape}</span><span class="s2">}}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">declare_dtype</span><span class="o">=</span><span class="n">declare_dtype</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">strides_init</span> <span class="o">=</span> <span class="s2">&quot;(</span><span class="si">{declare_dtype}</span><span class="s2">[</span><span class="si">{length}</span><span class="s2">]){{0}}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">declare_dtype</span><span class="o">=</span><span class="n">declare_dtype</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
        <span class="n">array_init</span> <span class="o">=</span> <span class="s1">&#39; = (t_ndarray){{</span><span class="se">\n</span><span class="s1">.</span><span class="si">{0}</span><span class="s1">=</span><span class="si">{1}</span><span class="s1">,</span><span class="se">\n</span><span class="s1"> .shape=</span><span class="si">{2}</span><span class="s1">,</span><span class="se">\n</span><span class="s1"> .strides=</span><span class="si">{3}</span><span class="s1">,</span><span class="se">\n</span><span class="s1"> &#39;</span>
        <span class="n">array_init</span> <span class="o">+=</span> <span class="s1">&#39;.nd=</span><span class="si">{4}</span><span class="s1">,</span><span class="se">\n</span><span class="s1"> .type=</span><span class="si">{0}</span><span class="s1">,</span><span class="se">\n</span><span class="s1"> .is_view=</span><span class="si">{5}</span><span class="se">\n</span><span class="s1">}};</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">array_init</span> <span class="o">=</span> <span class="n">array_init</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np_dtype</span><span class="p">,</span> <span class="n">dummy_array_name</span><span class="p">,</span>
                    <span class="n">shape_init</span><span class="p">,</span> <span class="n">strides_init</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="s1">&#39;false&#39;</span><span class="p">)</span>
        <span class="n">array_init</span> <span class="o">+=</span> <span class="s1">&#39;stack_array_init(&amp;</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;ndarrays&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">buffer_array</span><span class="p">,</span> <span class="n">array_init</span></div>

<div class="viewcode-block" id="CCodePrinter._handle_inline_func_call"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._handle_inline_func_call">[docs]</a>    <span class="k">def</span> <span class="nf">_handle_inline_func_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Print a function call to an inline function</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">funcdef</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">body</span>

        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">body</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">ScopedNode</span><span class="p">):</span>
                <span class="n">b</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">update_parent_scope</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="n">is_loop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Print any arguments using the same inline function</span>
        <span class="c1"># As the function definition is modified directly this function</span>
        <span class="c1"># cannot be called recursively with the same FunctionDef</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">is_user_of</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
                <span class="n">code</span> <span class="o">=</span> <span class="n">PrecomputedCode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="n">new_local_vars</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> \
                            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">func</span><span class="o">.</span><span class="n">local_vars</span><span class="p">]</span>

        <span class="n">parent_assign</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">get_direct_user_nodes</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Assign</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">parent_assign</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">results</span><span class="p">,</span> <span class="n">parent_assign</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lhs</span><span class="p">))</span>
            <span class="n">orig_res_vars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">new_res_vars</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_temporary_args</span>
            <span class="n">new_res_vars</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">obj</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">ObjectAddress</span><span class="p">)</span> <span class="k">else</span> <span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">new_res_vars</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_temporary_args</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">body</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">orig_res_vars</span><span class="p">,</span> <span class="n">new_res_vars</span><span class="p">)</span>

        <span class="c1"># Replace the arguments in the code</span>
        <span class="n">func</span><span class="o">.</span><span class="n">swap_in_args</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">new_local_vars</span><span class="p">)</span>

        <span class="n">func</span><span class="o">.</span><span class="n">remove_presence_checks</span><span class="p">()</span>

        <span class="c1"># Collect code but strip empty end</span>
        <span class="n">body_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
        <span class="n">code_lines</span> <span class="o">=</span> <span class="n">body_code</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">return_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\breturn\b&#39;</span><span class="p">)</span>
        <span class="n">has_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">return_regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">code_lines</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">has_results</span><span class="p">):</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">body_code</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_idx</span> <span class="o">=</span> <span class="n">has_results</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">result_line</span> <span class="o">=</span> <span class="n">code_lines</span><span class="p">[</span><span class="n">result_idx</span><span class="p">]</span>

            <span class="n">body_code</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">code_lines</span><span class="p">[:</span><span class="n">result_idx</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="n">body_code</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+=</span> <span class="n">body_code</span>
                <span class="c1"># Strip return and ; from return statement</span>
                <span class="n">code</span> <span class="o">=</span> <span class="n">result_line</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Put back original arguments</span>
        <span class="n">func</span><span class="o">.</span><span class="n">reinstate_presence_checks</span><span class="p">()</span>
        <span class="n">func</span><span class="o">.</span><span class="n">swap_out_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parent_assign</span><span class="p">:</span>
            <span class="n">body</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">new_res_vars</span><span class="p">,</span> <span class="n">orig_res_vars</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">func</span><span class="o">.</span><span class="n">global_vars</span> <span class="ow">or</span> <span class="n">func</span><span class="o">.</span><span class="n">global_funcs</span><span class="p">:</span>
            <span class="n">mod</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">get_direct_user_nodes</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Module</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">Import</span><span class="p">(</span><span class="n">mod</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="p">[</span><span class="n">AsName</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> \
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="o">.</span><span class="n">global_vars</span><span class="p">,</span> <span class="o">*</span><span class="n">func</span><span class="o">.</span><span class="n">global_funcs</span><span class="p">)]))</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="o">.</span><span class="n">global_vars</span><span class="p">,</span> <span class="o">*</span><span class="n">func</span><span class="o">.</span><span class="n">global_funcs</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">insert_symbol</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">body</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">ScopedNode</span><span class="p">):</span>
                <span class="n">b</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">update_parent_scope</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span> <span class="n">is_loop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">code</span></div>

    <span class="c1"># ============ Elements ============ #</span>

<div class="viewcode-block" id="CCodePrinter._print_PythonAbs"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonAbs">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonAbs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeFloat</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
            <span class="n">func</span> <span class="o">=</span> <span class="s2">&quot;fabs&quot;</span>
        <span class="k">elif</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeComplex</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;complex&#39;</span><span class="p">])</span>
            <span class="n">func</span> <span class="o">=</span> <span class="s2">&quot;cabs&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="s2">&quot;labs&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonMin"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonMin">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonMin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeFloat</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="s2">&quot;fmin(</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">arg1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">NativeInteger</span><span class="p">())</span>
            <span class="n">arg2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">NativeInteger</span><span class="p">())</span>
            <span class="n">assign1</span> <span class="o">=</span> <span class="n">Assign</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">assign2</span> <span class="o">=</span> <span class="n">Assign</span><span class="p">(</span><span class="n">arg2</span><span class="p">,</span> <span class="n">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">assign1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">assign2</span><span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">arg1</span><span class="si">}</span><span class="s2"> &lt; </span><span class="si">{</span><span class="n">arg2</span><span class="si">}</span><span class="s2"> ? </span><span class="si">{</span><span class="n">arg1</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">arg2</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;min in C is only supported for 2 scalar arguments&quot;</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span>
                    <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonMax"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonMax">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeFloat</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="s2">&quot;fmax(</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">arg1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">NativeInteger</span><span class="p">())</span>
            <span class="n">arg2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">NativeInteger</span><span class="p">())</span>
            <span class="n">assign1</span> <span class="o">=</span> <span class="n">Assign</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">assign2</span> <span class="o">=</span> <span class="n">Assign</span><span class="p">(</span><span class="n">arg2</span><span class="p">,</span> <span class="n">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">assign1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">assign2</span><span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">arg1</span><span class="si">}</span><span class="s2"> &gt; </span><span class="si">{</span><span class="n">arg2</span><span class="si">}</span><span class="s2"> ? </span><span class="si">{</span><span class="n">arg1</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">arg2</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;max in C is only supported for 2 scalar arguments&quot;</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span>
                    <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_SysExit"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_SysExit">[docs]</a>    <span class="k">def</span> <span class="nf">_print_SysExit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NativeInteger</span><span class="p">()</span> <span class="ow">or</span> <span class="n">expr</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">print_arg</span> <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">PythonPrint</span><span class="p">((</span><span class="n">print_arg</span><span class="p">,</span> <span class="p">),</span> <span class="n">file</span><span class="o">=</span><span class="s2">&quot;stderr&quot;</span><span class="p">))</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2">exit(</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s2">);</span><span class="se">\n</span><span class="s2">&quot;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonFloat"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonFloat">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
        <span class="n">type_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{0}</span><span class="s1">)(</span><span class="si">{1}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">type_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonInt"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonInt">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonInt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;stdint&#39;</span><span class="p">])</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
        <span class="n">type_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{0}</span><span class="s1">)(</span><span class="si">{1}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">type_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonBool"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonBool">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonBool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1"> != 0)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Literal"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Literal">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Literal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">python_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_LiteralInteger"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_LiteralInteger">[docs]</a>    <span class="k">def</span> <span class="nf">_print_LiteralInteger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">)</span> <span class="ow">and</span> <span class="n">get_final_precision</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;stdint&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;INT64_C(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">python_value</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">python_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_LiteralFloat"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_LiteralFloat">[docs]</a>    <span class="k">def</span> <span class="nf">_print_LiteralFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">LiteralFloat</span><span class="p">)</span> <span class="ow">and</span> <span class="n">get_final_precision</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">python_value</span><span class="p">)</span><span class="si">}</span><span class="s2">f&quot;</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">python_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_LiteralComplex"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_LiteralComplex">[docs]</a>    <span class="k">def</span> <span class="nf">_print_LiteralComplex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">real</span> <span class="o">==</span> <span class="n">LiteralFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">PyccelAssociativeParenthesis</span><span class="p">(</span><span class="n">PyccelMul</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">LiteralImaginaryUnit</span><span class="p">())))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">PyccelAssociativeParenthesis</span><span class="p">(</span><span class="n">PyccelAdd</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">PyccelMul</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">LiteralImaginaryUnit</span><span class="p">()))))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonComplex"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonComplex">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonComplex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_cast</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">internal_var</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">PyccelAssociativeParenthesis</span><span class="p">(</span><span class="n">PyccelAdd</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">PyccelMul</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">LiteralImaginaryUnit</span><span class="p">()))))</span>
        <span class="n">type_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="s1">&#39;complex&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{0}</span><span class="s1">)(</span><span class="si">{1}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">type_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_LiteralImaginaryUnit"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_LiteralImaginaryUnit">[docs]</a>    <span class="k">def</span> <span class="nf">_print_LiteralImaginaryUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;complex&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;_Complex_I&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonLen"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonLen">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonLen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span>
        <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;PythonLen not implemented for type </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="p">))</span> <span class="o">+</span>
                    <span class="n">PYCCEL_RESTRICTION_TODO</span><span class="p">,</span>
                    <span class="n">symbol</span> <span class="o">=</span> <span class="n">expr</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Header"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Header">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_ModuleHeader"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_ModuleHeader">[docs]</a>    <span class="k">def</span> <span class="nf">_print_ModuleHeader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_scope</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">scope</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_in_header</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">AsName</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># TODO: Add classes and interfaces</span>
        <span class="n">funcs</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">function_signature</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">funcs</span><span class="p">)</span>

        <span class="n">global_variables</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;extern &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">declarations</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">d</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">is_private</span><span class="p">])</span>

        <span class="c1"># Print imports last to be sure that all additional_imports have been collected</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">imports</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_additional_imports</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imports</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_in_header</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exit_scope</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;#ifndef </span><span class="si">{name}</span><span class="s1">_H</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;#define </span><span class="si">{name}</span><span class="s1">_H</span><span class="se">\n\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;</span><span class="si">{imports}</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;</span><span class="si">{variables}</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="c1">#&#39;{classes}\n&#39;</span>
                <span class="s1">&#39;</span><span class="si">{funcs}</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="c1">#&#39;{interfaces}\n&#39;</span>
                <span class="s1">&#39;#endif // </span><span class="si">{name}</span><span class="s1">_H</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">name</span>    <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                        <span class="n">imports</span> <span class="o">=</span> <span class="n">imports</span><span class="p">,</span>
                        <span class="n">variables</span> <span class="o">=</span> <span class="n">global_variables</span><span class="p">,</span>
                        <span class="n">funcs</span>   <span class="o">=</span> <span class="n">funcs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Module"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Module">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Module</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_scope</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">scope</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_module</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">name</span>
        <span class="n">body</span>    <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>

        <span class="n">global_variables</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">declarations</span><span class="p">])</span>

        <span class="c1"># Print imports last to be sure that all additional_imports have been collected</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="p">[</span><span class="n">Import</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">Module</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">name</span><span class="p">,(),())),</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_additional_imports</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imports</span><span class="p">)</span>

        <span class="n">code</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{imports}</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;</span><span class="si">{variables}</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;</span><span class="si">{body}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">imports</span>   <span class="o">=</span> <span class="n">imports</span><span class="p">,</span>
                        <span class="n">variables</span> <span class="o">=</span> <span class="n">global_variables</span><span class="p">,</span>
                        <span class="n">body</span>      <span class="o">=</span> <span class="n">body</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exit_scope</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">code</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Break"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Break">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Break</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;break;</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Continue"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Continue">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Continue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;continue;</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_While"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_While">[docs]</a>    <span class="k">def</span> <span class="nf">_print_While</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_scope</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">scope</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exit_scope</span><span class="p">()</span>
        <span class="n">cond</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">test</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;while(</span><span class="si">{condi}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">{{</span><span class="se">\n</span><span class="si">{body}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">condi</span> <span class="o">=</span> <span class="n">cond</span><span class="p">,</span> <span class="n">body</span> <span class="o">=</span> <span class="n">body</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_If"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_If">[docs]</a>    <span class="k">def</span> <span class="nf">_print_If</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">blocks</span><span class="p">):</span>
            <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;if (</span><span class="si">%s</span><span class="s2">)</span><span class="se">\n</span><span class="s2">{</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">blocks</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">LiteralTrue</span><span class="p">):</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;else</span><span class="se">\n</span><span class="s2">{</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;else if (</span><span class="si">%s</span><span class="s2">)</span><span class="se">\n</span><span class="s2">{</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">}</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">var</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_IfTernaryOperator"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_IfTernaryOperator">[docs]</a>    <span class="k">def</span> <span class="nf">_print_IfTernaryOperator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">cond</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">cond</span><span class="p">)</span>
        <span class="n">value_true</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">value_true</span><span class="p">)</span>
        <span class="n">value_false</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">value_false</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{cond}</span><span class="s1"> ? </span><span class="si">{true}</span><span class="s1"> : </span><span class="si">{false}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cond</span> <span class="o">=</span> <span class="n">cond</span><span class="p">,</span> <span class="n">true</span> <span class="o">=</span><span class="n">value_true</span><span class="p">,</span> <span class="n">false</span> <span class="o">=</span> <span class="n">value_false</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_LiteralTrue"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_LiteralTrue">[docs]</a>    <span class="k">def</span> <span class="nf">_print_LiteralTrue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;1&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_LiteralFalse"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_LiteralFalse">[docs]</a>    <span class="k">def</span> <span class="nf">_print_LiteralFalse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;0&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelAnd"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelAnd">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelAnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
        <span class="k">return</span> <span class="s1">&#39; &amp;&amp; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelOr"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelOr">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
        <span class="k">return</span> <span class="s1">&#39; || &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelEq"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelEq">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelEq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> == </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelNe"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelNe">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelNe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> != </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelLt"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelLt">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelLt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> &lt; </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelLe"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelLe">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelLe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> &lt;= </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelGt"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelGt">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelGt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> &gt; </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelGe"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelGe">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelGe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> &gt;= </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelNot"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelNot">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelNot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;!</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelMod"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelMod">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelMod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;pyc_math_c&#39;</span><span class="p">])</span>

        <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">second</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="k">return</span> <span class="s2">&quot;pyc_modulo(</span><span class="si">{n}</span><span class="s2">, </span><span class="si">{base}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">first</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">second</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">second</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="s2">&quot;pyc_fmodulo(</span><span class="si">{n}</span><span class="s2">, </span><span class="si">{base}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">first</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">second</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelPow"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelPow">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelPow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeComplex</span><span class="p">():</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">b</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeComplex</span><span class="p">()</span> <span class="k">else</span> <span class="n">PythonComplex</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span> <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeComplex</span><span class="p">()</span> <span class="k">else</span> <span class="n">PythonComplex</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;complex&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="s1">&#39;cpow(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">b</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeFloat</span><span class="p">()</span> <span class="k">else</span> <span class="n">NumpyFloat</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span> <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeFloat</span><span class="p">()</span> <span class="k">else</span> <span class="n">NumpyFloat</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;pow(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
            <span class="n">prec</span>  <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span>
            <span class="n">cast_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">)</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cast_type</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">code</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Import"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Import">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Import</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">ignore</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">AsName</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">source</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">source</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">DottedName</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>

        <span class="c1"># Get with a default value is not used here as it is</span>
        <span class="c1"># slower and on most occasions the import will not be in the</span>
        <span class="c1"># dictionary</span>
        <span class="k">if</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">import_dict</span><span class="p">:</span> <span class="c1"># pylint: disable=consider-using-get</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">import_dict</span><span class="p">[</span><span class="n">source</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">source</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">source</span> <span class="ow">in</span> <span class="n">c_library_headers</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;#include &lt;</span><span class="si">{0}</span><span class="s1">.h&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;#include &quot;</span><span class="si">{0}</span><span class="s1">.h&quot;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">source</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_LiteralString"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_LiteralString">[docs]</a>    <span class="k">def</span> <span class="nf">_print_LiteralString</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">format_str</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arg</span><span class="p">)</span>
        <span class="n">format_str</span> <span class="o">=</span> <span class="n">format_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">&quot;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\a</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">a&#39;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\b</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">b&#39;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\f</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">f&#39;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">r&#39;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">t&#39;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\v</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">v&#39;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&quot;&#39;</span><span class="p">)</span>\
                               <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">format_str</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter.get_print_format_and_arg"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.get_print_format_and_arg">[docs]</a>    <span class="k">def</span> <span class="nf">get_print_format_and_arg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">arg_format</span> <span class="o">=</span> <span class="n">type_to_format</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">dtype</span><span class="p">),</span> <span class="n">get_final_precision</span><span class="p">(</span><span class="n">var</span><span class="p">))]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> type is not supported currently&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">dtype</span><span class="p">),</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeComplex</span><span class="p">():</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyReal</span><span class="p">(</span><span class="n">var</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyImag</span><span class="p">(</span><span class="n">var</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="n">var</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeBool</span><span class="p">():</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> ? &quot;True&quot; : &quot;False&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">arg_format</span><span class="p">,</span> <span class="n">arg</span></div>

<div class="viewcode-block" id="CCodePrinter._print_CStringExpression"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_CStringExpression">[docs]</a>    <span class="k">def</span> <span class="nf">_print_CStringExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">get_flat_expression_list</span><span class="p">())</span></div>

<div class="viewcode-block" id="CCodePrinter._print_CMacro"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_CMacro">[docs]</a>    <span class="k">def</span> <span class="nf">_print_CMacro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">macro</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter.extract_function_call_results"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.extract_function_call_results">[docs]</a>    <span class="k">def</span> <span class="nf">extract_function_call_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">tmp_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">funcdef</span><span class="o">.</span><span class="n">results</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">tmp_list</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonPrint"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonPrint">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonPrint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;stdio&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;inttypes&#39;</span><span class="p">])</span>
        <span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">empty_end</span> <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="s1">&#39;end&#39;</span><span class="p">)</span>
        <span class="n">space_end</span> <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span> <span class="s1">&#39;end&#39;</span><span class="p">)</span>
        <span class="n">empty_sep</span> <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="s1">&#39;sep&#39;</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">expr</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_keyword</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">keyword</span> <span class="o">==</span> <span class="s1">&#39;sep&#39;</span>      <span class="p">:</span>   <span class="n">sep</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">f</span><span class="o">.</span><span class="n">keyword</span> <span class="o">==</span> <span class="s1">&#39;end&#39;</span>    <span class="p">:</span>   <span class="n">end</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> not implemented as a keyworded argument&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">keyword</span><span class="p">),</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>
        <span class="n">args_format</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">orig_args</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">expr</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">has_keyword</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">formatted_args_to_printf</span><span class="p">(</span><span class="n">args_format</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
            <span class="n">args_format</span> <span class="o">=</span> <span class="n">CStringExpression</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args_format</span><span class="p">)</span>
            <span class="n">args_format</span> <span class="o">+=</span> <span class="n">end</span>
            <span class="n">args_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">args_format</span><span class="p">)</span>
            <span class="n">args_code</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">args_format</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">file</span> <span class="o">==</span> <span class="s1">&#39;stderr&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;fprintf(stderr, </span><span class="si">{</span><span class="n">args_code</span><span class="si">}</span><span class="s2">);</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;printf(</span><span class="si">{</span><span class="n">args_code</span><span class="si">}</span><span class="s2">);</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">orig_args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">formatted_args_to_printf</span><span class="p">(</span><span class="n">args_format</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

        <span class="n">tuple_start</span> <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">))</span>
        <span class="n">tuple_sep</span>   <span class="o">=</span> <span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        <span class="n">tuple_end</span>   <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">orig_args</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">(</span><span class="n">InhomogeneousTupleVariable</span><span class="p">,</span> <span class="n">PythonTuple</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">args_format</span><span class="p">:</span>
                    <span class="n">code</span> <span class="o">+=</span> <span class="n">formatted_args_to_printf</span><span class="p">(</span><span class="n">args_format</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">sep</span><span class="p">)</span>
                    <span class="n">args_format</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">print_arg</span><span class="p">)</span> <span class="k">for</span> <span class="n">tuple_elem</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">print_arg</span> <span class="ow">in</span> <span class="p">(</span><span class="n">tuple_elem</span><span class="p">,</span> <span class="n">tuple_sep</span><span class="p">)][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)))</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">orig_args</span><span class="p">):</span>
                    <span class="n">end_of_tuple</span> <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="n">end</span><span class="p">),</span> <span class="s1">&#39;end&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">end_of_tuple</span> <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="n">sep</span><span class="p">),</span> <span class="s1">&#39;end&#39;</span><span class="p">)</span>
                <span class="n">code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">PythonPrint</span><span class="p">([</span><span class="n">tuple_start</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">tuple_end</span><span class="p">,</span> <span class="n">empty_sep</span><span class="p">,</span> <span class="n">end_of_tuple</span><span class="p">]))</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">PythonType</span><span class="p">):</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">print_string</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">FunctionCall</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">NativeTuple</span><span class="p">):</span>
                <span class="n">tmp_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_function_call_results</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="n">tmp_arg_format_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">tmp_list</span><span class="p">:</span>
                    <span class="n">arg_format</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_print_format_and_arg</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                    <span class="n">tmp_arg_format_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg_format</span><span class="p">)</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
                <span class="n">tmp_arg_format_list</span> <span class="o">=</span> <span class="n">CStringExpression</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmp_arg_format_list</span><span class="p">)</span>
                <span class="n">args_format</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CStringExpression</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="n">tmp_arg_format_list</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">))</span>
                <span class="n">assign</span> <span class="o">=</span> <span class="n">Assign</span><span class="p">(</span><span class="n">tmp_list</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">assign</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">f</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">args_format</span><span class="p">:</span>
                    <span class="n">code</span> <span class="o">+=</span> <span class="n">formatted_args_to_printf</span><span class="p">(</span><span class="n">args_format</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">sep</span><span class="p">)</span>
                    <span class="n">args_format</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">for_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">NativeInteger</span><span class="p">(),</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;i&#39;</span><span class="p">)</span>
                <span class="n">max_index</span> <span class="o">=</span> <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">for_range</span> <span class="o">=</span> <span class="n">PythonRange</span><span class="p">(</span><span class="n">max_index</span><span class="p">)</span>
                <span class="n">print_body</span> <span class="o">=</span> <span class="p">[</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">for_index</span><span class="p">])</span> <span class="p">]</span>
                <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">print_body</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">space_end</span><span class="p">)</span>

                <span class="n">for_body</span>  <span class="o">=</span> <span class="p">[</span><span class="n">PythonPrint</span><span class="p">(</span><span class="n">print_body</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">expr</span><span class="o">.</span><span class="n">file</span><span class="p">)]</span>
                <span class="n">for_scope</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">create_new_loop_scope</span><span class="p">()</span>
                <span class="n">for_loop</span>  <span class="o">=</span> <span class="n">For</span><span class="p">(</span><span class="n">for_index</span><span class="p">,</span> <span class="n">for_range</span><span class="p">,</span> <span class="n">for_body</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">for_scope</span><span class="p">)</span>
                <span class="n">for_end</span>   <span class="o">=</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="o">+</span><span class="n">end</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">orig_args</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;]&#39;</span><span class="p">),</span> <span class="n">keyword</span><span class="o">=</span><span class="s1">&#39;end&#39;</span><span class="p">)</span>

                <span class="n">body</span> <span class="o">=</span> <span class="n">CodeBlock</span><span class="p">([</span><span class="n">PythonPrint</span><span class="p">([</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">LiteralString</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">)),</span> <span class="n">empty_end</span><span class="p">],</span>
                                                <span class="n">file</span><span class="o">=</span><span class="n">expr</span><span class="o">.</span><span class="n">file</span><span class="p">),</span>
                                  <span class="n">for_loop</span><span class="p">,</span>
                                  <span class="n">PythonPrint</span><span class="p">([</span> <span class="n">FunctionCallArgument</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">max_index</span><span class="p">]),</span> <span class="n">for_end</span><span class="p">],</span>
                                                <span class="n">file</span><span class="o">=</span><span class="n">expr</span><span class="o">.</span><span class="n">file</span><span class="p">)],</span>
                                 <span class="n">unravelled</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
                <span class="n">code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arg_format</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_print_format_and_arg</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="n">args_format</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg_format</span><span class="p">)</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args_format</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">+=</span> <span class="n">formatted_args_to_printf</span><span class="p">(</span><span class="n">args_format</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">code</span></div>

<div class="viewcode-block" id="CCodePrinter.find_in_dtype_registry"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.find_in_dtype_registry">[docs]</a>    <span class="k">def</span> <span class="nf">find_in_dtype_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prec</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">prec</span> <span class="o">=</span> <span class="n">default_precision</span><span class="p">[</span><span class="n">dtype</span><span class="p">]</span>
        <span class="k">try</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">dtype_registry</span><span class="p">[(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">)]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">PYCCEL_RESTRICTION_TODO</span><span class="p">,</span>
                    <span class="n">symbol</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">[kind = </span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">),</span>
                    <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter.find_in_ndarray_type_registry"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.find_in_ndarray_type_registry">[docs]</a>    <span class="k">def</span> <span class="nf">find_in_ndarray_type_registry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prec</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">prec</span> <span class="o">=</span> <span class="n">default_precision</span><span class="p">[</span><span class="n">dtype</span><span class="p">]</span>
        <span class="k">try</span> <span class="p">:</span>
            <span class="k">return</span> <span class="n">ndarray_type_registry</span><span class="p">[(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">)]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">PYCCEL_RESTRICTION_TODO</span><span class="p">,</span>
                    <span class="n">symbol</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">[kind = </span><span class="si">{}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">),</span>
                    <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter.get_declare_type"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.get_declare_type">[docs]</a>    <span class="k">def</span> <span class="nf">get_declare_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="n">prec</span>  <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span>
        <span class="n">rank</span>  <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">rank</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">NativeInteger</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;stdint&#39;</span><span class="p">])</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">prec</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_ndarray</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">HomogeneousTupleVariable</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">UNSUPPORTED_ARRAY_RANK</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;ndarrays&#39;</span><span class="p">])</span>
                <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;t_ndarray&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">PYCCEL_RESTRICTION_TODO</span><span class="o">+</span><span class="s1">&#39; (rank&gt;0)&#39;</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> *&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_FuncAddressDeclare"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_FuncAddressDeclare">[docs]</a>    <span class="k">def</span> <span class="nf">_print_FuncAddressDeclare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ret_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_declare_type</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ret_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">datatype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
            <span class="n">args</span> <span class="o">+=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">memory_handling</span><span class="o">=</span><span class="s1">&#39;alias&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ret_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">datatype</span><span class="p">(</span><span class="s1">&#39;void&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">arg_code</span> <span class="o">=</span> <span class="s1">&#39;void&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># TODO: extract informations needed for printing in case of function argument which itself has a function argument</span>
            <span class="n">arg_code</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print_FuncAddressDeclare</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">FunctionAddress</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">{0}{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_declare_type</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">i</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">(*</span><span class="si">{}</span><span class="s1">)(</span><span class="si">{}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret_type</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arg_code</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Declare"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Declare">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Declare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">InhomogeneousTupleVariable</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print_Declare</span><span class="p">(</span><span class="n">Declare</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">intent</span><span class="o">=</span><span class="n">expr</span><span class="o">.</span><span class="n">intent</span><span class="p">,</span> <span class="n">static</span><span class="o">=</span><span class="n">expr</span><span class="o">.</span><span class="n">static</span><span class="p">))</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span>

        <span class="n">declaration_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_declare_type</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span>
        <span class="n">variable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">is_stack_array</span><span class="p">:</span>
            <span class="n">preface</span><span class="p">,</span> <span class="n">init</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_stack_array</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">,)</span>
        <span class="k">elif</span> <span class="n">declaration_type</span> <span class="o">==</span> <span class="s1">&#39;t_ndarray &#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_in_header</span><span class="p">:</span>
            <span class="n">preface</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">init</span>    <span class="o">=</span> <span class="s1">&#39; = {.shape = NULL}&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">preface</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">init</span>    <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">declaration</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{dtype}{var}{init}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">dtype</span> <span class="o">=</span> <span class="n">declaration_type</span><span class="p">,</span>
                            <span class="n">var</span>   <span class="o">=</span> <span class="n">variable</span><span class="p">,</span>
                            <span class="n">init</span>  <span class="o">=</span> <span class="n">init</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">preface</span> <span class="o">+</span> <span class="n">declaration</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NativeBool"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NativeBool">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NativeBool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;stdbool&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;bool&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NativeInteger"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NativeInteger">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NativeInteger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;int&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NativeFloat"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NativeFloat">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NativeFloat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;float&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NativeVoid"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NativeVoid">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NativeVoid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;void&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NativeComplex"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NativeComplex">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NativeComplex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;complex&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39;complex&#39;</span></div>
<div class="viewcode-block" id="CCodePrinter._print_NativeString"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NativeString">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NativeString</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;string&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter.function_signature"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.function_signature">[docs]</a>    <span class="k">def</span> <span class="nf">function_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">print_arg_names</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extract from function definition all the information</span>
<span class="sd">        (name, input, output) needed to create the signature</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        expr            : FunctionDef</span>
<span class="sd">            the function defintion</span>

<span class="sd">        print_arg_names : Bool</span>
<span class="sd">            default value True and False when we don&#39;t need to print</span>
<span class="sd">            arguments names</span>

<span class="sd">        Return</span>
<span class="sd">        ------</span>
<span class="sd">        String</span>
<span class="sd">            Signature of the function</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ret_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_declare_type</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ret_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">datatype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
            <span class="n">args</span> <span class="o">+=</span> <span class="p">[</span><span class="n">FunctionDefArgument</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ret_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">datatype</span><span class="p">(</span><span class="s1">&#39;void&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">arg_code</span> <span class="o">=</span> <span class="s1">&#39;void&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">get_var_arg</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
                <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;const &quot;</span> <span class="o">*</span> <span class="n">var</span><span class="o">.</span><span class="n">is_const</span>
                <span class="n">code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_declare_type</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
                <span class="n">code</span> <span class="o">+=</span> <span class="n">arg</span><span class="o">.</span><span class="n">name</span> <span class="o">*</span> <span class="n">print_arg_names</span>
                <span class="k">return</span> <span class="n">code</span>

            <span class="n">var_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">var</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">]</span>
            <span class="n">arg_code_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">function_signature</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">FunctionAddress</span><span class="p">)</span>
                                <span class="k">else</span> <span class="n">get_var_arg</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">var_list</span><span class="p">)]</span>
            <span class="n">arg_code</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">arg_code_list</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">FunctionAddress</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">(*</span><span class="si">{}</span><span class="s1">)(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret_type</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arg_code</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}{1}</span><span class="s1">(</span><span class="si">{2}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ret_type</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arg_code</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_IndexedElement"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_IndexedElement">[docs]</a>    <span class="k">def</span> <span class="nf">_print_IndexedElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">base</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">base</span>
        <span class="n">inds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">base_shape</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">allow_negative_indexes</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">PythonTuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">base</span><span class="o">.</span><span class="n">allows_negative_indexes</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inds</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">PyccelUnarySub</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LiteralInteger</span><span class="p">):</span>
                <span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">base_shape</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ind</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#indices of indexedElement of len==1 shouldn&#39;t be a tuple</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">ind</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">allow_negative_indexes</span> <span class="ow">and</span> \
                        <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">Slice</span><span class="p">):</span>
                    <span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">IfTernaryOperator</span><span class="p">(</span><span class="n">PyccelLt</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span>
                        <span class="n">PyccelAdd</span><span class="p">(</span><span class="n">base_shape</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ind</span><span class="p">,</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">),</span> <span class="n">ind</span><span class="p">)</span>
        <span class="c1">#set dtype to the C struct types</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_ndarray_type_registry</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="n">base_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s1">&#39;is_ndarray&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">HomogeneousTupleVariable</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1">#managing the Slice input</span>
                <span class="k">for</span> <span class="n">i</span> <span class="p">,</span> <span class="n">ind</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inds</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">Slice</span><span class="p">):</span>
                        <span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_slice_with_processed_arguments</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">PyccelArraySize</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">i</span><span class="p">),</span>
                            <span class="n">allow_negative_indexes</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Slice</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">PyccelAdd</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">),</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">inds</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">inds</span><span class="p">]</span>
                <span class="k">return</span> <span class="s2">&quot;array_slicing(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">base_name</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">rank</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inds</span><span class="p">))</span>
            <span class="n">inds</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cast_to</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">NativeInteger</span><span class="p">(),</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">inds</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;GET_ELEMENT(</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">base_name</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">inds</span><span class="p">))</span></div>


<div class="viewcode-block" id="CCodePrinter._cast_to"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._cast_to">[docs]</a>    <span class="k">def</span> <span class="nf">_cast_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">precision</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; add cast to an expression when needed</span>
<span class="sd">        parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr      : PyccelAstNode</span>
<span class="sd">                the expression to be cast</span>
<span class="sd">            dtype     : Datatype</span>
<span class="sd">                base type of the cast</span>
<span class="sd">            precision : integer</span>
<span class="sd">                precision of the base type of the cast</span>

<span class="sd">        Return</span>
<span class="sd">        ------</span>
<span class="sd">            String</span>
<span class="sd">                Return format string that contains the desired cast type</span>
<span class="sd">                NB: You should insert the expression to be cast in the string after using this function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="o">!=</span> <span class="n">dtype</span> <span class="ow">or</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span> <span class="o">!=</span> <span class="n">precision</span><span class="p">):</span>
            <span class="n">cast</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">dtype</span><span class="p">),</span> <span class="n">precision</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">){{}}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cast</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_DottedVariable"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_DottedVariable">[docs]</a>    <span class="k">def</span> <span class="nf">_print_DottedVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;convert dotted Variable to their C equivalent&quot;&quot;&quot;</span>

        <span class="n">name_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">lhs</span><span class="p">):</span>
            <span class="n">code</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">ObjectAddress</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">lhs</span><span class="p">))</span><span class="si">}</span><span class="s1">-&gt;</span><span class="si">{</span><span class="n">name_code</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lhs_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">lhs</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">lhs_code</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">name_code</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;(*</span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s1">)&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">code</span></div>

<div class="viewcode-block" id="CCodePrinter._new_slice_with_processed_arguments"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._new_slice_with_processed_arguments">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_new_slice_with_processed_arguments</span><span class="p">(</span><span class="n">_slice</span><span class="p">,</span> <span class="n">array_size</span><span class="p">,</span> <span class="n">allow_negative_index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Create new slice with informations collected from old slice and decorators</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            _slice : Slice</span>
<span class="sd">                slice needed to collect (start, stop, step)</span>
<span class="sd">            array_size : PyccelArraySize</span>
<span class="sd">                call to function size()</span>
<span class="sd">            allow_negative_index : Bool</span>
<span class="sd">                True when the decorator allow_negative_index is present</span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            Slice</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">if</span> <span class="n">_slice</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">_slice</span><span class="o">.</span><span class="n">start</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="n">array_size</span> <span class="k">if</span> <span class="n">_slice</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">_slice</span><span class="o">.</span><span class="n">stop</span>

        <span class="c1"># negative start and end in slice</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">PyccelUnarySub</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LiteralInteger</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">array_size</span><span class="p">,</span> <span class="n">start</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">allow_negative_index</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="p">(</span><span class="n">LiteralInteger</span><span class="p">,</span> <span class="n">PyccelArraySize</span><span class="p">)):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">IfTernaryOperator</span><span class="p">(</span><span class="n">PyccelLt</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span>
                            <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">array_size</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">),</span> <span class="n">start</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">PyccelUnarySub</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stop</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LiteralInteger</span><span class="p">):</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">array_size</span><span class="p">,</span> <span class="n">stop</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">allow_negative_index</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="p">(</span><span class="n">LiteralInteger</span><span class="p">,</span> <span class="n">PyccelArraySize</span><span class="p">)):</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">IfTernaryOperator</span><span class="p">(</span><span class="n">PyccelLt</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span>
                            <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">array_size</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">),</span> <span class="n">stop</span><span class="p">)</span>

        <span class="c1"># steps in slices</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">_slice</span><span class="o">.</span><span class="n">step</span>

        <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># negative step in slice</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">PyccelUnarySub</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LiteralInteger</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">array_size</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="k">if</span> <span class="n">_slice</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">start</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">if</span> <span class="n">_slice</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">stop</span>

        <span class="c1"># variable step in slice</span>
        <span class="k">elif</span> <span class="n">allow_negative_index</span> <span class="ow">and</span> <span class="n">step</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">):</span>
            <span class="n">og_start</span> <span class="o">=</span> <span class="n">start</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">IfTernaryOperator</span><span class="p">(</span><span class="n">PyccelGt</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span> <span class="n">start</span><span class="p">,</span> <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="n">IfTernaryOperator</span><span class="p">(</span><span class="n">PyccelGt</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span> <span class="n">stop</span><span class="p">,</span> <span class="n">og_start</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Slice</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NumpyArraySize"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NumpyArraySize">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NumpyArraySize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">-&gt;length&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">ObjectAddress</span><span class="p">(</span><span class="n">arg</span><span class="p">)))</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.length&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelArraySize"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelArraySize">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelArraySize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">arg</span>    <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">arg</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">-&gt;shape[</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">ObjectAddress</span><span class="p">(</span><span class="n">arg</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.shape[</span><span class="si">{}</span><span class="s1">]&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">index</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Allocate"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Allocate">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Allocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">free_code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="c1">#free the array if its already allocated and checking if its not null if the status is unknown</span>
        <span class="k">if</span>  <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;unknown&#39;</span><span class="p">):</span>
            <span class="n">free_code</span> <span class="o">=</span> <span class="s1">&#39;if (</span><span class="si">%s</span><span class="s1">.shape != NULL)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">free_code</span> <span class="o">+=</span> <span class="s2">&quot;{{</span><span class="se">\n</span><span class="si">{}</span><span class="s2">}}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">Deallocate</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">)))</span>
        <span class="k">elif</span>  <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s1">&#39;allocated&#39;</span><span class="p">):</span>
            <span class="n">free_code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">Deallocate</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;ndarrays&#39;</span><span class="p">])</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_ndarray_type_registry</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
        <span class="n">shape_dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
        <span class="n">shape_Assign</span> <span class="o">=</span> <span class="s2">&quot;(&quot;</span><span class="o">+</span> <span class="n">shape_dtype</span> <span class="o">+</span><span class="s2">&quot;[]){&quot;</span> <span class="o">+</span> <span class="n">shape</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span>
        <span class="n">is_view</span> <span class="o">=</span> <span class="s1">&#39;false&#39;</span> <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">on_heap</span> <span class="k">else</span> <span class="s1">&#39;true&#39;</span>
        <span class="n">alloc_code</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> = array_create(</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">);</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">shape_Assign</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span>
                <span class="n">is_view</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">free_code</span><span class="p">,</span> <span class="n">alloc_code</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Deallocate"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Deallocate">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Deallocate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">InhomogeneousTupleVariable</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">Deallocate</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">is_alias</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;free_pointer(</span><span class="si">{}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">))</span>
        <span class="k">return</span> <span class="s1">&#39;free_array(</span><span class="si">{}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">variable</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Slice"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Slice">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
        <span class="n">step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">step</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;new_slice(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NumpyUfuncBase"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NumpyUfuncBase">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NumpyUfuncBase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Convert a Python expression with a Numpy function call to C</span>
<span class="sd">        function call</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr : Pyccel ast node</span>
<span class="sd">                Python expression with a Numpy function call</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            string</span>
<span class="sd">                Equivalent expression in C language</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">            numpy.cos(x) ==&gt; cos(x)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># add necessary include</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="n">type_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="n">numpy_ufunc_to_c_float</span><span class="p">[</span><span class="n">type_name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">PYCCEL_RESTRICTION_TODO</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeComplex</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;complex&#39;</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">func_name</span> <span class="o">=</span> <span class="n">numpy_ufunc_to_c_complex</span><span class="p">[</span><span class="n">type_name</span><span class="p">]</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">INCOMPATIBLE_TYPEVAR_TO_FUNC</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">type_name</span><span class="p">)</span> <span class="p">,</span><span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NativeFloat</span><span class="p">():</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">arg</span><span class="p">)))</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="n">code_args</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">(</span><span class="si">{1}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func_name</span><span class="p">,</span> <span class="n">code_args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NumpySign"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NumpySign">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NumpySign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Print the corresponding C function for a call to Numpy.sign</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr : Pyccel ast node</span>
<span class="sd">                Python expression with Numpy.sign call</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            string</span>
<span class="sd">                Equivalent internal function in C</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">            import numpy</span>

<span class="sd">            numpy.sign(x) =&gt; isign(x)   (x is integer)</span>
<span class="sd">            numpy.sign(x) =&gt; fsign(x)   (x if float)</span>
<span class="sd">            numpy.sign(x) =&gt; csign(x)   (x is complex)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;numpy_c&#39;</span><span class="p">])</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">NativeInteger</span><span class="p">):</span>
            <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;isign&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">NativeFloat</span><span class="p">):</span>
            <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;fsign&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dtype</span><span class="p">,</span> <span class="n">NativeComplex</span><span class="p">):</span>
            <span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;csign&#39;</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="s1">)&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_MathFunctionBase"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_MathFunctionBase">[docs]</a>    <span class="k">def</span> <span class="nf">_print_MathFunctionBase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Convert a Python expression with a math function call to C</span>
<span class="sd">        function call</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr : Pyccel ast node</span>
<span class="sd">                Python expression with a Math function call</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            string</span>
<span class="sd">                Equivalent expression in C language</span>

<span class="sd">        ------</span>
<span class="sd">        Example:</span>
<span class="sd">        --------</span>
<span class="sd">            math.sin(x) ==&gt; sin(x)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># add necessary include</span>
        <span class="n">type_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="n">math_function_to_c</span><span class="p">[</span><span class="n">type_name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">PYCCEL_RESTRICTION_TODO</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">func_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pyc&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;pyc_math_c&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeComplex</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;cmath&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="o">!=</span> <span class="n">NativeFloat</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">func_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;pyc&quot;</span><span class="p">):</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">arg</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="n">code_args</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">cast_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{0}</span><span class="s1">)</span><span class="si">{1}</span><span class="s1">(</span><span class="si">{2}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cast_type</span><span class="p">,</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">code_args</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">(</span><span class="si">{1}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">func_name</span><span class="p">,</span> <span class="n">code_args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_MathIsfinite"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_MathIsfinite">[docs]</a>    <span class="k">def</span> <span class="nf">_print_MathIsfinite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a Python expression with a math isfinite function call to C</span>
<span class="sd">        function call&quot;&quot;&quot;</span>
        <span class="c1"># add necessary include</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;isfinite(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code_arg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_MathIsinf"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_MathIsinf">[docs]</a>    <span class="k">def</span> <span class="nf">_print_MathIsinf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a Python expression with a math isinf function call to C</span>
<span class="sd">        function call&quot;&quot;&quot;</span>
        <span class="c1"># add necessary include</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;isinf(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code_arg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_MathIsnan"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_MathIsnan">[docs]</a>    <span class="k">def</span> <span class="nf">_print_MathIsnan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a Python expression with a math isnan function call to C</span>
<span class="sd">        function call&quot;&quot;&quot;</span>
        <span class="c1"># add necessary include</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;isnan(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code_arg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_MathTrunc"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_MathTrunc">[docs]</a>    <span class="k">def</span> <span class="nf">_print_MathTrunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a Python expression with a math trunc function call to C</span>
<span class="sd">        function call&quot;&quot;&quot;</span>
        <span class="c1"># add necessary include</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">arg</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">():</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">code_arg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;trunc(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code_arg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_FunctionAddress"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_FunctionAddress">[docs]</a>    <span class="k">def</span> <span class="nf">_print_FunctionAddress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">name</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NumpyWhere"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NumpyWhere">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NumpyWhere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">cond</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">condition</span><span class="p">)</span>
        <span class="n">value_true</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">value_true</span><span class="p">)</span>
        <span class="n">value_false</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">value_false</span><span class="p">)</span>
        <span class="n">stmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{cond}</span><span class="s1"> ? </span><span class="si">{true}</span><span class="s1"> : </span><span class="si">{false}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cond</span> <span class="o">=</span> <span class="n">cond</span><span class="p">,</span>
                <span class="n">true</span> <span class="o">=</span> <span class="n">value_true</span><span class="p">,</span> <span class="n">false</span> <span class="o">=</span> <span class="n">value_false</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stmt</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Rand"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Rand">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Rand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Rand not implemented&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NumpyRandint"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NumpyRandint">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NumpyRandint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Randint not implemented&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NumpyMod"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NumpyMod">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NumpyMod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">PyccelMod</span><span class="p">(</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NumpyLinspace"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NumpyLinspace">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NumpyLinspace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;(</span><span class="si">{start}</span><span class="s1"> + </span><span class="si">{index}</span><span class="s1">*</span><span class="si">{step}</span><span class="s1">)&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">LiteralFalse</span><span class="p">):</span>
            <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;(</span><span class="si">{start}</span><span class="s1"> + </span><span class="si">{index}</span><span class="s1">*</span><span class="si">{step}</span><span class="s1">)&#39;</span>
            <span class="n">lhs_source</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">get_user_nodes</span><span class="p">(</span><span class="n">Assign</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lhs</span>
            <span class="n">lhs_source</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">ind</span><span class="p">,</span> <span class="n">PyccelMinus</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">num</span><span class="p">,</span> <span class="n">LiteralInteger</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">simplify</span> <span class="o">=</span> <span class="kc">True</span><span class="p">))</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs_source</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">LiteralTrue</span><span class="p">):</span>
                <span class="n">cond_template</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">+</span> <span class="s1">&#39; = </span><span class="si">{stop}</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cond_template</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">+</span> <span class="s1">&#39; = </span><span class="si">{cond}</span><span class="s1"> ? </span><span class="si">{stop}</span><span class="s1"> : &#39;</span> <span class="o">+</span> <span class="n">lhs</span>

        <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cast_to</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">stop</span><span class="p">))</span>

        <span class="n">init_value</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
            <span class="n">step</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">step</span><span class="p">),</span>
            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">ind</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">LiteralFalse</span><span class="p">):</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">init_value</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">LiteralTrue</span><span class="p">):</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">init_value</span> <span class="o">+</span> <span class="s1">&#39;;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">cond_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stop</span> <span class="o">=</span> <span class="n">v</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">init_value</span> <span class="o">+</span> <span class="s1">&#39;;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">cond_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cond</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">endpoint</span><span class="p">),</span><span class="n">stop</span> <span class="o">=</span> <span class="n">v</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">code</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Interface"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Interface">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_FunctionDef"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_FunctionDef">[docs]</a>    <span class="k">def</span> <span class="nf">_print_FunctionDef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_inline</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_scope</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">scope</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span>
        <span class="n">body</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="n">decs</span>  <span class="o">=</span> <span class="p">[</span><span class="n">Declare</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="k">else</span> <span class="n">FuncAddressDeclare</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">local_vars</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">is_temp</span><span class="p">:</span>
                    <span class="n">decs</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Declare</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">i</span><span class="p">)]</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
                    <span class="n">decs</span> <span class="o">+=</span> <span class="p">[</span><span class="n">FuncAddressDeclare</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">var</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">arguments</span><span class="p">]</span>
        <span class="n">decs</span> <span class="o">+=</span> <span class="p">[</span><span class="n">Declare</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> \
                <span class="k">if</span> <span class="n">v</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">local_vars</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">results</span><span class="p">,</span> <span class="n">arguments</span><span class="p">)]</span>
        <span class="n">decs</span>  <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">decs</span><span class="p">)</span>

        <span class="n">sep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">SeparatorComment</span><span class="p">(</span><span class="mi">40</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span> <span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">imports</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">doc_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">doc_string</span><span class="p">)</span> <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">doc_string</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>

        <span class="n">parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">sep</span><span class="p">,</span>
                 <span class="n">doc_string</span><span class="p">,</span>
                <span class="s1">&#39;</span><span class="si">{signature}</span><span class="se">\n</span><span class="s1">{{</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">signature</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">function_signature</span><span class="p">(</span><span class="n">expr</span><span class="p">)),</span>
                 <span class="n">decs</span><span class="p">,</span>
                 <span class="n">body</span><span class="p">,</span>
                 <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
                 <span class="n">sep</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exit_scope</span><span class="p">()</span>

        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parts</span> <span class="k">if</span> <span class="n">p</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter.stored_in_c_pointer"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.stored_in_c_pointer">[docs]</a>    <span class="k">def</span> <span class="nf">stored_in_c_pointer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Indicates whether the object a needs to be stored in a pointer</span>
<span class="sd">        in c code</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        a : PyccelAstNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">Nil</span><span class="p">,</span> <span class="n">ObjectAddress</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">FunctionCall</span><span class="p">):</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">funcdef</span><span class="o">.</span><span class="n">results</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">funcdef</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">is_alias</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">is_ndarray</span><span class="p">)</span> <span class="ow">or</span> <span class="n">a</span><span class="o">.</span><span class="n">is_optional</span> <span class="ow">or</span> \
                <span class="nb">any</span><span class="p">(</span><span class="n">a</span> <span class="ow">is</span> <span class="n">bi</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_args</span> <span class="k">for</span> <span class="n">bi</span> <span class="ow">in</span> <span class="n">b</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_FunctionCall"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_FunctionCall">[docs]</a>    <span class="k">def</span> <span class="nf">_print_FunctionCall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">funcdef</span>
        <span class="k">if</span> <span class="n">func</span><span class="o">.</span><span class="n">is_inline</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_inline_func_call</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
         <span class="c1"># Ensure the correct syntax is used for pointers</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">func</span><span class="o">.</span><span class="n">arguments</span><span class="p">):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">a</span> <span class="k">else</span> <span class="n">Nil</span><span class="p">()</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">var</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectAddress</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
                    <span class="n">tmp_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
                    <span class="n">assign</span> <span class="o">=</span> <span class="n">Assign</span><span class="p">(</span><span class="n">tmp_var</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">assign</span><span class="p">)</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ObjectAddress</span><span class="p">(</span><span class="n">tmp_var</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_temporary_args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_temporary_args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">args</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>

        <span class="n">call_code</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s1">)&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">func</span><span class="o">.</span><span class="n">results</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">call_code</span><span class="si">}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">call_code</span></div>

    <span class="k">def</span> <span class="nf">_print_Constant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Convert a Python expression with a math constant call to C</span>
<span class="sd">        function call</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            expr : Pyccel ast node</span>
<span class="sd">                Python expression with a Math constant</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            string</span>
<span class="sd">                String represent the value of the constant</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">            math.pi ==&gt; 3.14159265358979</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">LiteralFloat</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>

<div class="viewcode-block" id="CCodePrinter._print_Return"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Return">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Return</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">ObjectAddress</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">else</span> <span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">expr</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;return;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;return 0;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">return</span> <span class="s1">&#39;return 0;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="p">:</span>
            <span class="c1"># get Assign nodes from the CodeBlock object expr.stmt.</span>
            <span class="n">last_assign</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="o">.</span><span class="n">get_attribute_nodes</span><span class="p">(</span><span class="n">Assign</span><span class="p">,</span> <span class="n">excluded_nodes</span><span class="o">=</span><span class="n">FunctionCall</span><span class="p">)</span>
            <span class="n">deallocate_nodes</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="o">.</span><span class="n">get_attribute_nodes</span><span class="p">(</span><span class="n">Deallocate</span><span class="p">,</span> <span class="n">excluded_nodes</span><span class="o">=</span><span class="p">(</span><span class="n">Assign</span><span class="p">,))</span>
            <span class="n">vars_in_deallocate_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">variable</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">deallocate_nodes</span><span class="p">]</span>

            <span class="c1"># Check the Assign objects list in case of</span>
            <span class="c1"># the user assigns a variable to an object contains IndexedElement object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">last_assign</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">last_assign</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">AugAssign</span><span class="p">):</span>
                <span class="n">last_assign</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lhs</span><span class="o">.</span><span class="n">is_temp</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># make sure that stmt contains one assign node.</span>
                <span class="n">last_assign</span> <span class="o">=</span> <span class="n">last_assign</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">variables</span> <span class="o">=</span> <span class="n">last_assign</span><span class="o">.</span><span class="n">rhs</span><span class="o">.</span><span class="n">get_attribute_nodes</span><span class="p">(</span><span class="n">Variable</span><span class="p">)</span>
                <span class="n">unneeded_var</span> <span class="o">=</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">b</span> <span class="ow">in</span> <span class="n">vars_in_deallocate_nodes</span> <span class="ow">or</span> <span class="n">b</span><span class="o">.</span><span class="n">is_ndarray</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">unneeded_var</span><span class="p">:</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="o">.</span><span class="n">body</span> <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">last_assign</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">code</span> <span class="o">+</span> <span class="s1">&#39;return </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">last_assign</span><span class="o">.</span><span class="n">rhs</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">last_assign</span><span class="o">.</span><span class="n">lhs</span><span class="o">.</span><span class="n">is_temp</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">stmt</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">code</span> <span class="o">+</span> <span class="s1">&#39;return </span><span class="si">{0}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Pass"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Pass">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Pass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;// pass</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Nil"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Nil">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Nil</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;NULL&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NilArgument"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NilArgument">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NilArgument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="s2">&quot;Trying to use optional argument in inline function without providing a variable&quot;</span><span class="p">,</span>
                <span class="n">symbol</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span>
                <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelAdd"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelAdd">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelAdd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39; + &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelMinus"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelMinus">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelMinus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;-</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="s1">&#39; - &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelMul"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelMul">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelMul</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39; * &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelDiv"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelDiv">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelDiv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">()</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">NumpyFloat</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span>
        <span class="k">return</span>  <span class="s1">&#39; / &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelFloorDiv"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelFloorDiv">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelFloorDiv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
        <span class="c1"># the result type of the floor division is dependent on the arguments</span>
        <span class="c1"># type, if all arguments are integers the result is integer otherwise</span>
        <span class="c1"># the result type is float</span>
        <span class="n">need_to_cast</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeInteger</span><span class="p">()</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39; / &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeFloat</span><span class="p">()</span> <span class="k">else</span> <span class="n">NumpyFloat</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">need_to_cast</span><span class="p">):</span>
            <span class="n">cast_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_dtype_registry</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="n">expr</span><span class="o">.</span><span class="n">precision</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;(</span><span class="si">{}</span><span class="s2">)floor(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cast_type</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;floor(</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">code</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelRShift"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelRShift">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelRShift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39; &gt;&gt; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelLShift"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelLShift">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelLShift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39; &lt;&lt; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelBitXor"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelBitXor">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelBitXor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeBool</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> != </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="s1">&#39; ^ &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelBitOr"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelBitOr">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelBitOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeBool</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39; || &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39; | &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelBitAnd"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelBitAnd">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelBitAnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeBool</span><span class="p">():</span>
            <span class="k">return</span> <span class="s1">&#39; &amp;&amp; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39; &amp; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelInvert"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelInvert">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelInvert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;~</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelAssociativeParenthesis"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelAssociativeParenthesis">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelAssociativeParenthesis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelUnary"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelUnary">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelUnary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;+</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelUnarySub"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelUnarySub">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelUnarySub</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;-</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_AugAssign"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_AugAssign">[docs]</a>    <span class="k">def</span> <span class="nf">_print_AugAssign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">op</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">lhs</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">rhs</span>

        <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="s1">&#39;%&#39;</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">NativeFloat</span><span class="p">):</span>
            <span class="n">_expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">to_basic_assign</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">_expr</span><span class="p">)</span>

        <span class="n">lhs_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span>
        <span class="n">rhs_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">lhs_code</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">op</span><span class="si">}</span><span class="s1">= </span><span class="si">{</span><span class="n">rhs_code</span><span class="si">}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Assign"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Assign">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Assign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">prefix_code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">lhs</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">rhs</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lhs</span><span class="o">.</span><span class="n">is_optional</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lhs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optional_partners</span><span class="p">:</span>
                <span class="c1"># Collect temporary variable which provides</span>
                <span class="c1"># allocated memory space for this optional variable</span>
                <span class="n">tmp_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_optional_partners</span><span class="p">[</span><span class="n">lhs</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Create temporary variable to provide allocated</span>
                <span class="c1"># memory space before assigning to the pointer value</span>
                <span class="c1"># (may be NULL)</span>
                <span class="n">tmp_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span>
                        <span class="n">is_optional</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_optional_partners</span><span class="p">[</span><span class="n">lhs</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp_var</span>
            <span class="c1"># Point optional variable at an allocated memory space</span>
            <span class="n">prefix_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">AliasAssign</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">tmp_var</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">FunctionCall</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">NativeTuple</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_temporary_args</span> <span class="o">=</span> <span class="p">[</span><span class="n">ObjectAddress</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">lhs</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">prefix_code</span><span class="o">+</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
        <span class="c1"># Inhomogenous tuples are unravelled and therefore do not exist in the c printer</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="n">NumpyArray</span><span class="p">,</span> <span class="n">PythonTuple</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">prefix_code</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">copy_NumpyArray_Data</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="n">NumpyFull</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">prefix_code</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">arrayFill</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">lhs</span><span class="p">)</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prefix_code</span><span class="o">+</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_AliasAssign"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_AliasAssign">[docs]</a>    <span class="k">def</span> <span class="nf">_print_AliasAssign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">lhs_var</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">lhs</span>
        <span class="n">rhs_var</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">rhs</span>

        <span class="n">lhs_address</span> <span class="o">=</span> <span class="n">ObjectAddress</span><span class="p">(</span><span class="n">lhs_var</span><span class="p">)</span>
        <span class="n">rhs_address</span> <span class="o">=</span> <span class="n">ObjectAddress</span><span class="p">(</span><span class="n">rhs_var</span><span class="p">)</span>

        <span class="c1"># the below condition handles the case of reassinging a pointer to an array view.</span>
        <span class="c1"># setting the pointer&#39;s is_view attribute to false so it can be ignored by the free_pointer function.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">lhs_var</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs_var</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="ow">and</span> <span class="n">lhs_var</span><span class="o">.</span><span class="n">is_ndarray</span><span class="p">:</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs_var</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs_var</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="ow">and</span> <span class="n">rhs_var</span><span class="o">.</span><span class="n">is_ndarray</span><span class="p">:</span>
                <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs_address</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">lhs_var</span><span class="o">.</span><span class="n">order</span> <span class="o">==</span> <span class="n">rhs_var</span><span class="o">.</span><span class="n">order</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;alias_assign(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="s1">&#39;transpose_alias_assign(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">);</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs_var</span><span class="p">)</span>
                <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs_address</span><span class="p">)</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs_address</span><span class="p">)</span>

            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> = </span><span class="si">{}</span><span class="s1">;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_For"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_For">[docs]</a>    <span class="k">def</span> <span class="nf">_print_For</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_scope</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">scope</span><span class="p">)</span>

        <span class="n">indices</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">iterable</span><span class="o">.</span><span class="n">loop_counters</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">indices</span> <span class="k">else</span> <span class="n">expr</span><span class="o">.</span><span class="n">target</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">iterable</span><span class="o">.</span><span class="n">num_loop_counters_required</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">insert_variable</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

        <span class="n">target</span>   <span class="o">=</span> <span class="n">index</span>
        <span class="n">iterable</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">iterable</span><span class="o">.</span><span class="n">get_range</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">PythonRange</span><span class="p">):</span>
            <span class="c1"># Only iterable currently supported is PythonRange</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">PYCCEL_RESTRICTION_TODO</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span>
                <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span>

        <span class="n">counter</span>    <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
        <span class="n">body</span>       <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>

        <span class="n">additional_assign</span> <span class="o">=</span> <span class="n">CodeBlock</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">iterable</span><span class="o">.</span><span class="n">get_assigns</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">target</span><span class="p">))</span>
        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">additional_assign</span><span class="p">)</span> <span class="o">+</span> <span class="n">body</span>

        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">iterable</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="n">stop</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">iterable</span><span class="o">.</span><span class="n">stop</span> <span class="p">)</span>
        <span class="n">step</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">iterable</span><span class="o">.</span><span class="n">step</span> <span class="p">)</span>

        <span class="n">test_step</span> <span class="o">=</span> <span class="n">iterable</span><span class="o">.</span><span class="n">step</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_step</span><span class="p">,</span> <span class="n">PyccelUnarySub</span><span class="p">):</span>
            <span class="n">test_step</span> <span class="o">=</span> <span class="n">iterable</span><span class="o">.</span><span class="n">step</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exit_scope</span><span class="p">()</span>
        <span class="c1"># testing if the step is a value or an expression</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">test_step</span><span class="p">,</span> <span class="n">Literal</span><span class="p">):</span>
            <span class="n">op</span> <span class="o">=</span> <span class="s1">&#39;&gt;&#39;</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iterable</span><span class="o">.</span><span class="n">step</span><span class="p">,</span> <span class="n">PyccelUnarySub</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&lt;&#39;</span>
            <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;for (</span><span class="si">{counter}</span><span class="s1"> = </span><span class="si">{start}</span><span class="s1">; </span><span class="si">{counter}</span><span class="s1"> </span><span class="si">{op}</span><span class="s1"> </span><span class="si">{stop}</span><span class="s1">; </span><span class="si">{counter}</span><span class="s1"> += &#39;</span>
                        <span class="s1">&#39;</span><span class="si">{step}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">{{</span><span class="se">\n</span><span class="si">{body}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">counter</span><span class="o">=</span><span class="n">counter</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span>
                                                          <span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="s1">&#39;for (</span><span class="si">{counter}</span><span class="s1"> = </span><span class="si">{start}</span><span class="s1">; (</span><span class="si">{step}</span><span class="s1"> &gt; 0) ? (</span><span class="si">{counter}</span><span class="s1"> &lt; </span><span class="si">{stop}</span><span class="s1">) : (</span><span class="si">{counter}</span><span class="s1"> &gt; </span><span class="si">{stop}</span><span class="s1">); </span><span class="si">{counter}</span><span class="s1"> += &#39;</span>
                <span class="s1">&#39;</span><span class="si">{step}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">{{</span><span class="se">\n</span><span class="si">{body}</span><span class="s1">}}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">counter</span><span class="o">=</span><span class="n">counter</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
                                                  <span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="n">step</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_FunctionalFor"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_FunctionalFor">[docs]</a>    <span class="k">def</span> <span class="nf">_print_FunctionalFor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">loops</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">loops</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">loops</span></div>

<div class="viewcode-block" id="CCodePrinter._print_CodeBlock"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_CodeBlock">[docs]</a>    <span class="k">def</span> <span class="nf">_print_CodeBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">unravelled</span><span class="p">:</span>
            <span class="n">body_exprs</span> <span class="o">=</span> <span class="n">expand_to_loops</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">get_temporary_variable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="p">,</span>
                    <span class="n">language_has_vectors</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">body_exprs</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">body</span>
        <span class="n">body_stmts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">body_exprs</span> <span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
            <span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">+</span> <span class="n">code</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_additional_code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">body_stmts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">body_stmts</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Idx"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Idx">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Idx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">label</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Exp1"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Exp1">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Exp1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;M_E&quot;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Pi"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Pi">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Pi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;M_PI&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Infinity"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Infinity">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Infinity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;HUGE_VAL&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_NegativeInfinity"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_NegativeInfinity">[docs]</a>    <span class="k">def</span> <span class="nf">_print_NegativeInfinity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;-HUGE_VAL&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonReal"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonReal">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonReal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;creal(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">internal_var</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonImag"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonImag">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonImag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;cimag(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">internal_var</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PythonConjugate"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PythonConjugate">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PythonConjugate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;conj(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">internal_var</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._handle_is_operator"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._handle_is_operator">[docs]</a>    <span class="k">def</span> <span class="nf">_handle_is_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Op</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>

        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">lhs</span><span class="p">)</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">Nil</span><span class="p">()</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="n">ObjectAddress</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">lhs</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">lhs</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="k">else</span> <span class="n">expr</span><span class="o">.</span><span class="n">lhs</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="n">ObjectAddress</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Variable</span><span class="p">)</span> <span class="k">else</span> <span class="n">expr</span><span class="o">.</span><span class="n">rhs</span>

            <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">Op</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeBool</span><span class="p">()</span> <span class="ow">and</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">is</span> <span class="n">NativeBool</span><span class="p">()):</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">Op</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">report</span><span class="p">(</span><span class="n">PYCCEL_RESTRICTION_IS_ISNOT</span><span class="p">,</span>
                          <span class="n">symbol</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span> <span class="n">severity</span><span class="o">=</span><span class="s1">&#39;fatal&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelIsNot"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelIsNot">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelIsNot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_is_operator</span><span class="p">(</span><span class="s2">&quot;!=&quot;</span><span class="p">,</span> <span class="n">expr</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelIs"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelIs">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_is_operator</span><span class="p">(</span><span class="s2">&quot;==&quot;</span><span class="p">,</span> <span class="n">expr</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Piecewise"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Piecewise">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Piecewise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">cond</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># We need the last conditional to be a True, otherwise the resulting</span>
            <span class="c1"># function may not return a result.</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All Piecewise expressions must contain an &quot;</span>
                             <span class="s2">&quot;(expr, True) statement to be used as a default &quot;</span>
                             <span class="s2">&quot;condition. Without one, the generated &quot;</span>
                             <span class="s2">&quot;expression may not evaluate to anything under &quot;</span>
                             <span class="s2">&quot;some condition.&quot;</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">has</span><span class="p">(</span><span class="n">Assign</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;if (</span><span class="si">%s</span><span class="s2">) {</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;else {</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;else if (</span><span class="si">%s</span><span class="s2">) {</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
                <span class="n">code0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">code0</span><span class="p">)</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The piecewise was used in an expression, need to do inline</span>
            <span class="c1"># operators. This has the downside that inline operators will</span>
            <span class="c1"># not work for statements that span multiple lines (Matrix or</span>
            <span class="c1"># Indexed expressions).</span>
            <span class="n">ecpairs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;((</span><span class="si">%s</span><span class="s2">) ? (</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                    <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">last_line</span> <span class="o">=</span> <span class="s2">&quot;: (</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;: &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ecpairs</span><span class="p">)</span> <span class="o">+</span> <span class="n">last_line</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;)&quot;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">ecpairs</span><span class="p">)])</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Constant"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Constant">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Constant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">expr</span> <span class="o">==</span> <span class="n">math_constants</span><span class="p">[</span><span class="s1">&#39;inf&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="s1">&#39;HUGE_VAL&#39;</span>
        <span class="k">elif</span> <span class="n">expr</span> <span class="o">==</span> <span class="n">math_constants</span><span class="p">[</span><span class="s1">&#39;pi&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="s1">&#39;M_PI&#39;</span>
        <span class="k">elif</span> <span class="n">expr</span> <span class="o">==</span> <span class="n">math_constants</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="s1">&#39;M_E&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Constant not implemented&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Variable"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Variable">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
            <span class="k">return</span> <span class="s1">&#39;(*</span><span class="si">{0}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">name</span></div>

<div class="viewcode-block" id="CCodePrinter._print_FunctionDefArgument"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_FunctionDefArgument">[docs]</a>    <span class="k">def</span> <span class="nf">_print_FunctionDefArgument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_FunctionCallArgument"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_FunctionCallArgument">[docs]</a>    <span class="k">def</span> <span class="nf">_print_FunctionCallArgument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_ObjectAddress"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_ObjectAddress">[docs]</a>    <span class="k">def</span> <span class="nf">_print_ObjectAddress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">obj_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">ObjectAddress</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">stored_in_c_pointer</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">obj</span><span class="p">):</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&amp;</span><span class="si">{</span><span class="n">obj_code</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj_code</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;(*&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">obj_code</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">obj_code</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">obj_code</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Comment"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Comment">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

        <span class="k">return</span> <span class="s1">&#39;/*&#39;</span> <span class="o">+</span> <span class="n">comments</span> <span class="o">+</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Assert"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Assert">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Assert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">condition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">test</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_import</span><span class="p">(</span><span class="n">c_imports</span><span class="p">[</span><span class="s1">&#39;assert&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="s2">&quot;assert(</span><span class="si">{0}</span><span class="s2">);</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PyccelSymbol"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PyccelSymbol">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PyccelSymbol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">expr</span></div>

<div class="viewcode-block" id="CCodePrinter._print_CommentBlock"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_CommentBlock">[docs]</a>    <span class="k">def</span> <span class="nf">_print_CommentBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">txts</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">comments</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">header</span>
        <span class="n">header_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>

        <span class="n">ln</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">txts</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ln</span><span class="o">&lt;</span><span class="nb">max</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">header_size</span><span class="o">+</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">ln</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">top</span>  <span class="o">=</span> <span class="s1">&#39;/*&#39;</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span><span class="o">*</span><span class="nb">int</span><span class="p">((</span><span class="n">ln</span><span class="o">-</span><span class="n">header_size</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">header</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span><span class="o">*</span><span class="nb">int</span><span class="p">((</span><span class="n">ln</span><span class="o">-</span><span class="n">header_size</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">ln</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">top</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span>
        <span class="n">bottom</span> <span class="o">=</span> <span class="s1">&#39;/*&#39;</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span><span class="o">*</span><span class="n">ln</span> <span class="o">+</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">txts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;/*&#39;</span> <span class="o">+</span> <span class="n">t</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="p">(</span><span class="n">ln</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;*/</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">txts</span><span class="p">]</span>

        <span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">txts</span><span class="p">)</span>

        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">top</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">bottom</span><span class="p">])</span></div>

<div class="viewcode-block" id="CCodePrinter._print_EmptyNode"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_EmptyNode">[docs]</a>    <span class="k">def</span> <span class="nf">_print_EmptyNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>

    <span class="c1">#=================== OMP ==================</span>

<div class="viewcode-block" id="CCodePrinter._print_OmpAnnotatedComment"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_OmpAnnotatedComment">[docs]</a>    <span class="k">def</span> <span class="nf">_print_OmpAnnotatedComment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">clauses</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">combined</span><span class="p">:</span>
            <span class="n">clauses</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">expr</span><span class="o">.</span><span class="n">combined</span>
        <span class="n">clauses</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">txt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">has_nowait</span><span class="p">:</span>
            <span class="n">clauses</span> <span class="o">=</span> <span class="n">clauses</span> <span class="o">+</span> <span class="s1">&#39; nowait&#39;</span>
        <span class="n">omp_expr</span> <span class="o">=</span> <span class="s1">&#39;#pragma omp </span><span class="si">{}{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">clauses</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_multiline</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">combined</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">omp_expr</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">combined</span> <span class="ow">and</span> <span class="s2">&quot;for&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">combined</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;masked taskloop&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">combined</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;distribute&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">combined</span><span class="p">):</span>
                    <span class="n">omp_expr</span> <span class="o">+=</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">return</span> <span class="n">omp_expr</span></div>

<div class="viewcode-block" id="CCodePrinter._print_Omp_End_Clause"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Omp_End_Clause">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Omp_End_Clause</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span></div>
    <span class="c1">#=====================================</span>

<div class="viewcode-block" id="CCodePrinter._print_Program"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_Program">[docs]</a>    <span class="k">def</span> <span class="nf">_print_Program</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_scope</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">scope</span><span class="p">)</span>
        <span class="n">body</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scope</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="n">decs</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">Declare</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">)</span>

        <span class="n">imports</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">imports</span><span class="p">,</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_additional_imports</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">imports</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">exit_scope</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">{imports}</span><span class="s1">&#39;</span>
                <span class="s1">&#39;int main()</span><span class="se">\n</span><span class="s1">{{</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;</span><span class="si">{decs}</span><span class="s1">&#39;</span>
                <span class="s1">&#39;</span><span class="si">{body}</span><span class="s1">&#39;</span>
                <span class="s1">&#39;return 0;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;}}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">imports</span><span class="o">=</span><span class="n">imports</span><span class="p">,</span>
                                    <span class="n">decs</span><span class="o">=</span><span class="n">decs</span><span class="p">,</span>
                                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">)</span></div>

    <span class="c1">#=================== MACROS ==================</span>

<div class="viewcode-block" id="CCodePrinter._print_MacroShape"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_MacroShape">[docs]</a>    <span class="k">def</span> <span class="nf">_print_MacroShape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">argument</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="p">(</span><span class="n">Variable</span><span class="p">,</span> <span class="n">IndexedElement</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Expecting a variable, given </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">var</span><span class="p">)))</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">shape</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


        <span class="k">elif</span> <span class="ow">not</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">):</span>
                <span class="n">shape</span> <span class="o">=</span> <span class="n">shape</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">shape</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span></div>

<div class="viewcode-block" id="CCodePrinter._print_MacroCount"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_MacroCount">[docs]</a>    <span class="k">def</span> <span class="nf">_print_MacroCount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>

        <span class="n">var</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">argument</span>

        <span class="k">if</span> <span class="n">var</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;1&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_print</span><span class="p">(</span><span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">PyccelMul</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">simplify</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span></div>

<div class="viewcode-block" id="CCodePrinter._print_PrecomputedCode"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter._print_PrecomputedCode">[docs]</a>    <span class="k">def</span> <span class="nf">_print_PrecomputedCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">code</span></div>


<div class="viewcode-block" id="CCodePrinter.indent_code"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.CCodePrinter.indent_code">[docs]</a>    <span class="k">def</span> <span class="nf">indent_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Accepts a string of code or a list of code lines&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">code_lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent_code</span><span class="p">(</span><span class="n">code</span><span class="o">.</span><span class="n">splitlines</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">code_lines</span><span class="p">)</span>

        <span class="n">tab</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_default_settings</span><span class="p">[</span><span class="s2">&quot;tabwidth&quot;</span><span class="p">]</span>
        <span class="n">inc_token</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;{&#39;</span><span class="p">,</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;{</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;(</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">dec_token</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>

        <span class="n">code</span> <span class="o">=</span> <span class="p">[</span> <span class="n">line</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s1">&#39; </span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">code</span> <span class="p">]</span>

        <span class="n">increase</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">int</span><span class="p">(</span><span class="nb">any</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">endswith</span><span class="p">,</span> <span class="n">inc_token</span><span class="p">)))</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">code</span> <span class="p">]</span>
        <span class="n">decrease</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">int</span><span class="p">(</span><span class="nb">any</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">,</span> <span class="n">dec_token</span><span class="p">)))</span>
                     <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">code</span> <span class="p">]</span>

        <span class="n">pretty</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="n">pretty</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">level</span> <span class="o">-=</span> <span class="n">decrease</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="n">pretty</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tab</span><span class="o">*</span><span class="n">level</span><span class="p">,</span> <span class="n">line</span><span class="p">))</span>
            <span class="n">level</span> <span class="o">+=</span> <span class="n">increase</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">pretty</span></div></div>

<div class="viewcode-block" id="ccode"><a class="viewcode-back" href="../../../../pyccel.codegen.printing.html#pyccel.codegen.printing.ccode.ccode">[docs]</a><span class="k">def</span> <span class="nf">ccode</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">assign_to</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts an expr to a string of c code</span>

<span class="sd">    expr : Expr</span>
<span class="sd">        A pyccel expression to be converted.</span>
<span class="sd">    filename : str</span>
<span class="sd">        The name of the file being translated. Used in error printing</span>
<span class="sd">    assign_to : optional</span>
<span class="sd">        When given, the argument is used as the name of the variable to which</span>
<span class="sd">        the expression is assigned. Can be a string, ``Symbol``,</span>
<span class="sd">        ``MatrixSymbol``, or ``Indexed`` type. This is helpful in case of</span>
<span class="sd">        line-wrapping, or for expressions that generate multi-line statements.</span>
<span class="sd">    precision : integer, optional</span>
<span class="sd">        The precision for numbers such as pi [default=15].</span>
<span class="sd">    user_functions : dict, optional</span>
<span class="sd">        A dictionary where keys are ``FunctionClass`` instances and values are</span>
<span class="sd">        their string representations. Alternatively, the dictionary value can</span>
<span class="sd">        be a list of tuples i.e. [(argument_test, cfunction_string)]. See below</span>
<span class="sd">        for examples.</span>
<span class="sd">    dereference : iterable, optional</span>
<span class="sd">        An iterable of symbols that should be dereferenced in the printed code</span>
<span class="sd">        expression. These would be values passed by address to the function.</span>
<span class="sd">        For example, if ``dereference=[a]``, the resulting code would print</span>
<span class="sd">        ``(*a)`` instead of ``a``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">CCodePrinter</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">settings</span><span class="p">)</span><span class="o">.</span><span class="n">doprint</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">assign_to</span><span class="p">)</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, *.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>